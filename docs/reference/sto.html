<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Find, download and preprocess Sentinel-2 images — sto • SALTO: Sentinel-2 And Landsat TOolbox</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Google analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-11080708-8', 'auto');
  ga('send', 'pageview');

</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">salto</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../reference/index.html">Function reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ranghetti/salto/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Find, download and preprocess Sentinel-2 images</h1>
    </div>

    
    <p>The function is a wrapper to perform the entire
processing chain to find, download and pre-process Sentinel-2
data. Input is a set of parameters that can be passed with a
list or file (parameter <code>param_list</code>) or singularly (see the
descriptions of all the other parameters).</p>
    

    <pre class="usage"><span class='fu'>sto</span>(<span class='kw'>param_list</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>gui</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>preprocess</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>s2_levels</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>sel_sensor</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>online</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>overwrite_safe</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>rm_safe</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>step_atmcorr</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>timewindow</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>timeperiod</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>extent</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>extent_name</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>s2tiles_selected</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>s2orbits_selected</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>list_prods</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>list_indices</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>index_source</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>mask_type</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>max_mask</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>clip_on_extent</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>extent_as_mask</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>reference_path</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>res</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>res_s2</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>unit</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>proj</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>resampling</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>resampling_scl</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>outformat</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>index_datatype</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>compression</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>path_l1c</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>path_l2a</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>path_tiles</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>path_merged</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>path_out</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>path_indices</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>path_subdirs</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>thumbnails</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>use_python</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>param_list</th>
      <td><p>(optional) List of input parameters:
it can be both an R list or the path of a JSON file.
If some parameters are passed both as elements of <code>param_list</code>
and as function arguments, the values passed as function
arguments are considered.
If some parameters are missing in <code>param_list</code> and are not
provided as arguments, default values will be used.
Use the function <code><a href='s2_gui.html'>s2_gui()</a></code> to create a complete list of
parameters.
If <code>param_list</code> is NULL (default), values given with the
parameters below (or default values for parameters not
provided) are used.</p></td>
    </tr>
    <tr>
      <th>gui</th>
      <td><p>(optional) Logical: if TRUE, function <code><a href='s2_gui.html'>s2_gui()</a></code> is
launched before starting to process in order to set or load parameters;
if FALSE, the function uses parameters passed with <code>param_list</code> or
with other function arguments. Default is FALSE if <code>param_list</code> is not
NULL, TRUE elsewhere.</p></td>
    </tr>
    <tr>
      <th>preprocess</th>
      <td><p>(optional) Logical: TRUE (default) to perform also
preprocessing steps, FALSE not to (do only find, download
and atmospheric correction).</p></td>
    </tr>
    <tr>
      <th>s2_levels</th>
      <td><p>(optional) Character vector of length 1 or 2, with
Sentinel-2 levels required for processing steps or as output.
This parameter is used only if <code>preprocess = FALSE</code> (otherwise, the
required levels are derived from <code>list_prods</code>).
Accepted values: "l1c" and "l2a"; default: "l2a".</p></td>
    </tr>
    <tr>
      <th>sel_sensor</th>
      <td><p>(optional) Character vector of length 1 or 2, with
Sentinel-2 sensors to be used.
Accepted values: "s2a" and "s2b"; default: c("s2a","s2b").</p></td>
    </tr>
    <tr>
      <th>online</th>
      <td><p>(optional) Logical: TRUE (default) to search for available
products on SciHub (and download if needed); FALSE to work
only with already downloaded SAFE products.</p></td>
    </tr>
    <tr>
      <th>overwrite_safe</th>
      <td><p>(optional) Logical: TRUE to overwrite existing
products with products found online or manually corrected,
FALSE (default) to skip download and atmospheric correction for
products already existing.</p></td>
    </tr>
    <tr>
      <th>rm_safe</th>
      <td><p>(optional) Character: should SAFE products be deleted after
preprocessing? "yes" means to delete all SAFE; "no" (default)
not to delete; "l1c" to delete only Level-1C products.</p></td>
    </tr>
    <tr>
      <th>step_atmcorr</th>
      <td><p>(optional) Character vector to determine how to obtain
Level-2A SAFE products:</p><ul>
<li><p>"auto" (default) means that L2A is first
searched on SciHub: if found, it is dowloaded, if not, the
corresponding Level-1C is downloaded and sen2cor is used to
produce L2A;</p></li>
<li><p>"scihub" means that sen2cor is always used from L1C products
downloaded from SciHub;</p></li>
<li><p>"l2a" means that they are downloaded if available on SciHub,
otherwise they are skipped (sen2cor is never used);</p></li>
<li><p>"no" means that L2A are not considered (processing chain
makes use only of L1C products).</p></li>
</ul></td>
    </tr>
    <tr>
      <th>timewindow</th>
      <td><p>(optional) Temporal window for querying: Date object
of length 1 (single day) or 2 (time window). Default is NA in online mode
(meaning that no filters are used, and all found images are processed); in
online mode, default is to process last 90 days.
Only in offline mode, it is possible to pass NA not to
filter by sensing time.</p></td>
    </tr>
    <tr>
      <th>timeperiod</th>
      <td><p>(optional) Character:</p><ul>
<li><p>"full" (default) means that all
the images included in the time window are considered;</p></li>
<li><p>"seasonal" means that only the single seasonal periods in the
window are used (i.e., with a time window from 2015-06-01 to
2017-08-31, the periods 2015-06-01 to 2015-08-31, 2016-06-01
to 2016-08-31 and 2017-06-01 to 2017-08-31 are considered).</p></li>
</ul></td>
    </tr>
    <tr>
      <th>extent</th>
      <td><p>(optional) Spatial extent on which to clip products (it can
be both the path of a vector file or a geoJSON).
Default is NA for offline mode (meaning no extent:
all found tiles are entirely used); in online mode, a sample extent is used
as default.</p></td>
    </tr>
    <tr>
      <th>extent_name</th>
      <td><p>(optional) Name of the area set as extent, to be used in
the output file names. Default is to leave it blank. The name is an
alphanumeric string which cannot contain points nor underscores, and that
cannot be a five-length string with the same structure of a tile ID
(two numeric and three uppercase character values).</p></td>
    </tr>
    <tr>
      <th>s2tiles_selected</th>
      <td><p>(optional) Character vector with the Sentinel-2
tiles to be considered (default is NA, meaning all the tiles).</p></td>
    </tr>
    <tr>
      <th>s2orbits_selected</th>
      <td><p>(optional) Character vector with the Sentinel-2
orbits to be considered (still to be implemented; for now,
all the accepted values are listed).</p></td>
    </tr>
    <tr>
      <th>list_prods</th>
      <td><p>(optional) Character vector with the values of the
products to be processed (accepted values: "TOA", "BOA", "SCL",
"TCI"). Default is "BOA".</p></td>
    </tr>
    <tr>
      <th>list_indices</th>
      <td><p>(optional) Character vector with the values of the
spectral indices to be computed. Default is no one (NA).</p></td>
    </tr>
    <tr>
      <th>index_source</th>
      <td><p>(optional) Character value: if "BOA" (default), indices
are computed from BOA values; if "TOA", non corrected reflectances
are instead used (be careful to use this setting!).</p></td>
    </tr>
    <tr>
      <th>mask_type</th>
      <td><p>(optional) Character value which determines the categories
in the Surface Classification Map to be masked (see <code><a href='s2_mask.html'>s2_mask()</a></code>
for the accepted values). Default (NA) is not to mask.</p></td>
    </tr>
    <tr>
      <th>max_mask</th>
      <td><p>(optional) Numeric value (range 0 to 100), which represents
the maximum percentage of allowed masked surface (by clouds or any other
type of mask chosen with argument <code>mask_type</code>) for producing outputs.
Images with a percentage of masked surface greater than <code>max_mask</code><!-- % -->
are not processed (the list of expected output files which have not been
generated is returned as an attribute, named "skipped").
Default value is 80.
Notice that the percentage is computed on non-NA values (if input images
had previously been clipped and masked using a polygon, the percentage is
computed on the surface included in the masking polygons).</p></td>
    </tr>
    <tr>
      <th>clip_on_extent</th>
      <td><p>(optional) Logical: if TRUE (default), output products
and indices are clipped to the selected extent (and resampled/reprojected);
if FALSE, the geometry and extension of the tiles is maintained.</p></td>
    </tr>
    <tr>
      <th>extent_as_mask</th>
      <td><p>(optional) Logical: if TRUE, pixel values outside
the <code>extent</code> polygon are set to NA; if FALSE (default), all the values
within the bounding box are maintained.</p></td>
    </tr>
    <tr>
      <th>reference_path</th>
      <td><p>(optional) Path of the raster file to be used as a
reference grid. If NA (default), no reference is used.</p></td>
    </tr>
    <tr>
      <th>res</th>
      <td><p>(optional) Numerifc vector of length 2 with the x-y resolution
for output products. Default: c(10,10). NA means that the resolution
is keeped as native.</p></td>
    </tr>
    <tr>
      <th>res_s2</th>
      <td><p>(optional) Character value corresponding to the native Sentinel-2
resolution to be used. Accepted values are "10m" (default), "20m"
and "60m".</p></td>
    </tr>
    <tr>
      <th>unit</th>
      <td><p>(optional) Character value corresponding to the unit of measure
with which to interpret the resolution (for now, only "Meter" -
the default value - is supported).</p></td>
    </tr>
    <tr>
      <th>proj</th>
      <td><p>(optional) Character string with the pro4string of the output
resolution. default value (NA) means not to reproject.</p></td>
    </tr>
    <tr>
      <th>resampling</th>
      <td><p>(optional) Resampling method (one of the values supported
by <code>gdal_translate</code>: "near" (default), "bilinear", "cubic",
"cubicspline", "lanczos", "average" or "mode").</p></td>
    </tr>
    <tr>
      <th>resampling_scl</th>
      <td><p>(optional) Resampling method for categorical products
(for now, only SCL): one among "near" (default) and "mode".</p></td>
    </tr>
    <tr>
      <th>outformat</th>
      <td><p>(optional) Format of the output file (in a
format recognised by GDAL). Default is "GTiff".</p></td>
    </tr>
    <tr>
      <th>index_datatype</th>
      <td><p>(optional) Numeric datatype of the ouptut
spectral indices (see <a href='s2_calcindices.html'>s2_calcindices</a>.</p></td>
    </tr>
    <tr>
      <th>compression</th>
      <td><p>(optional) In the case GTiff is chosen as
output format, the compression indicated with this parameter is
used (default is "DEFLATE").</p></td>
    </tr>
    <tr>
      <th>overwrite</th>
      <td><p>(optional) Logical value: should existing output
files be overwritten? (default: FALSE).</p></td>
    </tr>
    <tr>
      <th>path_l1c</th>
      <td><p>(optional) Path of the directory in which Level-1C SAFE
products are searched and/or downloaded. If not provided (default), a
temporary directory is used.</p></td>
    </tr>
    <tr>
      <th>path_l2a</th>
      <td><p>(optional) Path of the directory in which Level-2A SAFE
products are searched, downloaded and/or generated. If not provided
(default), a temporary directory is used.</p></td>
    </tr>
    <tr>
      <th>path_tiles</th>
      <td><p>(optional) Path of the directory in which Sentinel-2
tiles (as generated by <a href='s2_translate.html'>s2_translate</a>) are searched and/or generated.
If not provided (default), a temporary directory is used, and files
are generated as virtual rasters; otherwise, they are generated in
the format specified with <code>outformat</code> parameter.</p></td>
    </tr>
    <tr>
      <th>path_merged</th>
      <td><p>(optional) Path of the directory in which Sentinel-2
tiles merged by orbit (as generated by <a href='s2_merge.html'>s2_merge</a>) are searched and/or
generated.
If not provided (default), a temporary directory is used, and files
are generated as virtual rasters; otherwise, they are generated in
the format specified with <code>outformat</code> parameter.</p></td>
    </tr>
    <tr>
      <th>path_out</th>
      <td><p>(optional) Path of the directory in which Sentinel-2
output products are searched and/or generated.
If not provided (default), a temporary directory is used.</p></td>
    </tr>
    <tr>
      <th>path_indices</th>
      <td><p>(optional) Path of the directory in which files of
spectral indices are searched and/or generated.
If not provided (default), <code>path_out</code> is used.</p></td>
    </tr>
    <tr>
      <th>path_subdirs</th>
      <td><p>(optional) Logical: if TRUE (default), a directory
for each output product or spectral index is generated within
<code>path_tiles</code>, <code>path_merged</code>, <code>path_out</code> and <code>path_indices</code>; if FALSE,
products are put directly within them.</p></td>
    </tr>
    <tr>
      <th>thumbnails</th>
      <td><p>(optional) Logical: if TRUE (default), a thumbnail is
added for each product created. Thumbnails are JPEG or PNG georeferenced
small images (width or height of 1024 pixels) with default colour palettes
(for more details, see the help window in the GUI). They are placed in
a subdirectory of the products names "thumbnails".
If FALSE, they are not created.</p></td>
    </tr>
    <tr>
      <th>use_python</th>
      <td><p>(optional) Logical: if TRUE (default), the presence of
python in the system is checked before running the function;
if FALSE, this is skipped. Setting this to FALSE can bge useful on
systems with problems with python, when [sto)] is intended
to be used only for processing existing SAFE files (python is required
in any case to download SAFE).</p>
<p>[sto)]: R:sto)</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A vector with the paths of the files which were created (excluded
the temporary files); NULL otherwise.</p>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
          </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Luigi Ranghetti, Lorenzo Busetto.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
