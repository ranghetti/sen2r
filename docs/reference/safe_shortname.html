<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Rename products using a shorten convention — safe_shortname • An R toolbox to find, download an preprocess Sentinel-2 data</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Rename products using a shorten convention — safe_shortname" />

<meta property="og:description" content="This function renames a Sentinel-2 product in order to
obtain shorten names. See the details for the structure of the
adopted schema (named &quot;sen2r naming convention&quot;).
The function applies only to product names (not to single granule
names), since it is thought to be applied to entire products." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-11080708-8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-11080708-8');
</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">An R toolbox to find, download an preprocess Sentinel-2 data</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../reference/index.html">Function reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ranghetti/sen2r/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Rename products using a shorten convention</h1>
    <small class="dont-index">Source: <a href='https://github.com/ranghetti/sen2r/blob/master/R/safe_shortname.R'><code>R/safe_shortname.R</code></a></small>
    <div class="hidden name"><code>safe_shortname.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function renames a Sentinel-2 product in order to
obtain shorten names. See the details for the structure of the
adopted schema (named "sen2r naming convention").
The function applies only to product names (not to single granule
names), since it is thought to be applied to entire products.</p>
    
    </div>

    <pre class="usage"><span class='fu'>safe_shortname</span>(<span class='no'>prod_name</span>, <span class='kw'>prod_type</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ext</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>res</span> <span class='kw'>=</span> <span class='st'>"10m"</span>,
  <span class='kw'>tiles</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>force_tiles</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>full.name</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>set.seed</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>multiple_names</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>abort</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>prod_name</th>
      <td><p>Input Sentinel-2 product name: it can be both
a complete path or a simple file name. If the file exists, the product
is scanned to retrieve the tiles list and UTM zones; otherwise the
basename is simply translated in he short naming convention.</p></td>
    </tr>
    <tr>
      <th>prod_type</th>
      <td><p>(optional) Output product (default: <code>TOA</code> for L1C, <code>BOA</code>
for L2A); see the details for the list of accepted products.</p></td>
    </tr>
    <tr>
      <th>ext</th>
      <td><p>(optional) Extension of the output filename (default: none).</p></td>
    </tr>
    <tr>
      <th>res</th>
      <td><p>(optional) Spatial resolution (one between '10m', '20m' or '60m');
default is '10m'. Notice that, choosing '10m' or '20m', bands with lower
resolution will be rescaled to <code>res</code>. Band 08 is used with <code>res = '10m'</code>,
band 08A with <code>res = '20m'</code> and <code>res = '60m'</code>.</p></td>
    </tr>
    <tr>
      <th>tiles</th>
      <td><p>(optional) Character vector with the desired output tile IDs
(if specified IDs are not present in the input SAFE product, they are not
produced). Default (NA) is to consider all the found tiles.</p></td>
    </tr>
    <tr>
      <th>force_tiles</th>
      <td><p>(optional) Logical: if FALSE (default), only already
existing tiles (specified using the argument <code>tiles</code>) are used;
if TRUE, all specified tiles are considered.
It takes effect only if <code>tiles</code> is not NA.</p></td>
    </tr>
    <tr>
      <th>full.name</th>
      <td><p>Logical value: if TRUE (default), all the input path
is maintained (if existing); if FALSE, only basename is returned.</p></td>
    </tr>
    <tr>
      <th>set.seed</th>
      <td><p>(internal parameter) Logical value: if TRUE, the
generation of random tile elements is univocal (this is useful not to
assign different names to the same element); if FALSE, the generation
is completely random (this is useful not to assign the same name to
products with the same names (e.g. product with old name downloaded in
different moments which contains different subsets of tiles).
Default value is TRUE if the file exists locally, FALSE if not.</p></td>
    </tr>
    <tr>
      <th>multiple_names</th>
      <td><p>Logical: if TRUE, multiple names are returned in case
the SAFE product contains more than one tile; if FALSE (default), a random
tile element is used.</p></td>
    </tr>
    <tr>
      <th>abort</th>
      <td><p>Logical parameter: if TRUE, the function aborts in case
<code>prod_type</code> is not recognised; if FALSE (default), a warning is shown.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Output product name</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><a href='https://earth.esa.int/web/sentinel/user-guides/sentinel-2-msi/naming-convention'>ESA Sentinel-2 naming convention</a>
is particularly long-winded; moreover, the convention changed after
December 6th 2016, causing products to follow two different schemes.</p>
<p>The convention here adopted, named "sen2r naming convention",
follows this schema:</p>
<p><code>S2mll_yyyymmdd_rrr_ttttt_ppp_rr.fff</code></p>
<p>where:</p><ul>
<li><p><code>S2mll</code> (length: 5) shows the mission ID (<code>S2A</code> or <code>S2B</code>) and the product level
(<code>1C</code> or <code>2A</code>);</p></li>
<li><p><code>yyyymmdd</code> (length: 8) is the sensing date (e.g. <code>20170603</code> for 2017-06-03) ; the
hour is skipped, since a single sensor can not pass two times in a
day on the same tile);</p></li>
<li><p><code>rrr</code> (length: 3) is the relative orbit number (e.g. <code>022</code>);</p></li>
<li><p><code>ttttt</code> (length: 5) is the tile number (e.g. <code>32TQQ</code>);</p></li>
<li><p><code>ppp</code> (length: 3) is the output product, being one of these:
<em>for level 1C:</em></p><ul>
<li><p><code>TOA</code>: 13-bands Top-Of-Atmosphere Reflectance;
<em>for level 2A:</em></p></li>
<li><p><code>BOA</code>: 13-bands Bottom-Of-Atmosphere Reflectance;</p></li>
<li><p><code>TCI</code>: True Colour Image (3-band RGB 8-bit image);</p></li>
<li><p><code>AOT</code>: Aerosol Optical Thickness;</p></li>
<li><p><code>WVP</code>: Water Vapour;</p></li>
<li><p><code>SCL</code>: Scene Classification Map;</p></li>
<li><p><code>CLD</code>: Quality Indicators for cloud probabilities;</p></li>
<li><p><code>SNW</code>: Quality Indicators for snow probabilities;</p></li>
<li><p><code>VIS</code>: TODO Visibility (used for AOT);</p></li>
</ul></li>
<li><p><code>rr</code> (length: 2) is the original minimum spatial resolution in metres
(10, 20 or 60);</p></li>
<li><p><code>fff</code> (length: variable, generally 3) is the file extension.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>License: GPL 3.0</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Define product names</span>
<span class='no'>s2_compactname_example</span> <span class='kw'>&lt;-</span> <span class='fu'>file.path</span>(
  <span class='st'>"/non/existing/path"</span>,
  <span class='st'>"S2A_MSIL1C_20170603T101031_N0205_R022_T32TQQ_20170603T101026.SAFE"</span>)
<span class='no'>s2_oldname_example</span> <span class='kw'>&lt;-</span>
  <span class='st'>"S2A_OPER_PRD_MSIL1C_PDMC_20160809T051732_R022_V20150704T101337_20150704T101337.SAFE"</span>
<span class='no'>s2_existing_example</span> <span class='kw'>&lt;-</span> <span class='st'>"/replace/with/the/main/path/of/existing/product/with/oldname/convention"</span>

<span class='co'># With compact names, it works also without scanning the file</span>
<span class='fu'>safe_shortname</span>(<span class='no'>s2_compactname_example</span>, <span class='kw'>ext</span><span class='kw'>=</span><span class='st'>"tif"</span>)</div><div class='output co'>#&gt; [1] "/non/existing/path/S2A1C_20170603_022_32TQQ_TOA_10.tif"</div><div class='input'>
<span class='co'># With old names, without scanning the file the id_tile is not retrieved,</span>
<span class='co'># so the tile filed is replaced with a random sequence</span>
<span class='fu'>unlist</span>(<span class='fu'>lapply</span>(<span class='fu'>rep</span>(<span class='no'>s2_oldname_example</span>,<span class='fl'>5</span>), <span class='no'>safe_shortname</span>, <span class='kw'>full.name</span><span class='kw'>=</span><span class='fl'>FALSE</span>))</div><div class='output co'>#&gt; [1] "S2A1C_20150704_022_CV600_TOA_10" "S2A1C_20150704_022_EA466_TOA_10"
#&gt; [3] "S2A1C_20150704_022_MH732_TOA_10" "S2A1C_20150704_022_UW174_TOA_10"
#&gt; [5] "S2A1C_20150704_022_AI402_TOA_10"</div><div class='input'>
</div><span class='co'># NOT RUN {</span>
<span class='co'># If the file exists locally, the tile is retrieved from the content</span>
<span class='co'># (if unique; if not, a random sequence is equally used, but it is</span>
<span class='co'># always the same for the same product)</span>
<span class='fu'>safe_shortname</span>(<span class='no'>s2_existing_example</span>, <span class='kw'>full.name</span><span class='kw'>=</span><span class='fl'>FALSE</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#note">Note</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Luigi Ranghetti, phD (2017) <a href='mailto:ranghetti.l@irea.cnr.it'>ranghetti.l@irea.cnr.it</a>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Luigi Ranghetti, Lorenzo Busetto.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

