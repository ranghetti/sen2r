<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Compute maps of spectral indices — s2_calcindices • An R toolbox to find, download an preprocess Sentinel-2 data</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Compute maps of spectral indices — s2_calcindices" />

<meta property="og:description" content="Create maps of a set of spectral indices. Since
gdal_calc.py is used to perform computations, output files
are physical rasters (no output VRT is allowed)." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-11080708-8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-11080708-8');
</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">An R toolbox to find, download an preprocess Sentinel-2 data</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../reference/index.html">Function reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ranghetti/sen2r/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compute maps of spectral indices</h1>
    <small class="dont-index">Source: <a href='https://github.com/ranghetti/sen2r/blob/master/R/s2_calcindices.R'><code>R/s2_calcindices.R</code></a></small>
    <div class="hidden name"><code>s2_calcindices.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Create maps of a set of spectral indices. Since
<code>gdal_calc.py</code> is used to perform computations, output files
are physical rasters (no output VRT is allowed).</p>
    
    </div>

    <pre class="usage"><span class='fu'>s2_calcindices</span>(<span class='no'>infiles</span>, <span class='no'>indices</span>, <span class='kw'>outdir</span> <span class='kw'>=</span> <span class='st'>"."</span>, <span class='kw'>parameters</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>source</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"TOA"</span>, <span class='st'>"BOA"</span>), <span class='kw'>format</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>subdirs</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>tmpdir</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>compress</span> <span class='kw'>=</span> <span class='st'>"DEFLATE"</span>, <span class='kw'>dataType</span> <span class='kw'>=</span> <span class='st'>"Int16"</span>, <span class='kw'>scaleFactor</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>proc_mode</span> <span class='kw'>=</span> <span class='st'>"raster"</span>, <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>.log_message</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>.log_output</span> <span class='kw'>=</span> <span class='fl'>NA</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>infiles</th>
      <td><p>A vector of input filenames. Input files are paths
of BOA (or TOA) products already converted from SAFE format to a
format managed by GDAL (use <a href='s2_translate.html'>s2_translate</a> to do it);
their names must be in the sen2r naming convention
(<a href='safe_shortname.html'>safe_shortname</a>).</p></td>
    </tr>
    <tr>
      <th>indices</th>
      <td><p>Character vector with the names of the required
indices. Values should be included in names corresponding to the
Abbreviations of the following indices:
<a href='http://www.indexdatabase.de/db/is.php?sensor_id=96'>IDB</a>
FIXME the list of the accepted values is a subset; this reference
will be replaced with an internal html page integrated in the
shiny interface).</p></td>
    </tr>
    <tr>
      <th>outdir</th>
      <td><p>(optional) Full name of the output directory where
the files should be created (default: current directory).
<code>outdir</code> can bot be an existing or non-existing directory (in the
second case, its parent directory must exists).
If it is a relative path, it is expanded from the common parent
directory of <code>infiles</code>.</p></td>
    </tr>
    <tr>
      <th>parameters</th>
      <td><p>(optional) Values of index parameters. This variable
must be a named list, in which each element is a list of parameters,
i.e.:
<code>parameters = list("SAVI" = list("a" = 0.5))</code>
Values can be both numeric values or band names (e.g. "band_1").
If not specified, parameters are set to default values.</p></td>
    </tr>
    <tr>
      <th>source</th>
      <td><p>(optional) Vector with the products from which computing
the indices. It can be "BOA", "TOA" or both (default). If both values
are provided, indices are computed from the available products ("TOA"
if TOA is available, BOA if BOA is available); in the case both are
available, two files are produced (they can be distinguished from the
level component - S2x1C or S2x2A - in the filename).</p></td>
    </tr>
    <tr>
      <th>format</th>
      <td><p>(optional) Format of the output file (in a
format recognised by GDAL). Default is the same format of input images
(or "GTiff" in case of VRT input images).</p></td>
    </tr>
    <tr>
      <th>subdirs</th>
      <td><p>(optional) Logical: if TRUE, different indices are
placed in separated <code>outfile</code> subdirectories; if FALSE, they are placed in
<code>outfile</code> directory; if NA (default), subdirectories are created only if
more than a single spectral index is required.</p></td>
    </tr>
    <tr>
      <th>tmpdir</th>
      <td><p>(optional) Path where intermediate files (GTiff) will be
created in case <code>format</code> is "VRT".</p></td>
    </tr>
    <tr>
      <th>compress</th>
      <td><p>(optional) In the case a GTiff format is
present, the compression indicated with this parameter is used.</p></td>
    </tr>
    <tr>
      <th>dataType</th>
      <td><p>(optional) Numeric datatype of the ouptut rasters.
if "Float32" or "Float64" is chosen, numeric values are not rescaled;
if "Int16" (default) or "UInt16", values are multiplicated by <code>scaleFactor</code> argument;
if "Byte", values are shifted by 100, multiplicated by 100 and truncated
at 200 (so that range -1 to 1 is coherced to 0-200), and nodata value
is assigned to 255.</p></td>
    </tr>
    <tr>
      <th>scaleFactor</th>
      <td><p>(optional) Scale factor for output values when an integer
datatype is chosen (default values are 10000 for "Int16" and "UInt16",
1E9 for "Int32" and "UInt32"). Notice that, using "UInt16" and "UInt32" types,
negative values will be truncated to 0.</p></td>
    </tr>
    <tr>
      <th>proc_mode</th>
      <td><p>(optional) Character: if <code>"gdal_calc"</code>,
gdal_calc routines are used to compute indices;
if <code>"raster"</code> (default), R functions are instead used.
<strong>Note</strong>: there is a difference in which the two modes manage values out
of ranges (e.g. -32768 to 32767 in Int16 and 0 to 255 in Byte):
"raster" mode set these values to NA, "gdal_calc"mode clip them to the
minimum/maximum values.</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>(optional) Logical: if TRUE, the function is run using parallel
processing, to speed-up the computation for large rasters.
The number of cores is automatically determined; specifying it is also
possible (e.g. <code>parallel = 4</code>).
If FALSE (default), single core processing is used.
Multiprocess masking computation is always performed in singlecore mode</p></td>
    </tr>
    <tr>
      <th>overwrite</th>
      <td><p>Logical value: should existing output files be
overwritten? (default: FALSE)</p></td>
    </tr>
    <tr>
      <th>.log_message</th>
      <td><p>(optional) Internal parameter
(it is used when the function is called by <code><a href='sen2r.html'>sen2r()</a></code>).</p></td>
    </tr>
    <tr>
      <th>.log_output</th>
      <td><p>(optional) Internal parameter
(it is used when the function is called by <code><a href='sen2r.html'>sen2r()</a></code>).</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A vector with the names of the created products.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>License: GPL 3.0</p>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#note">Note</a></li>
          </ul>

    <h2>Author</h2>
    <p>Luigi Ranghetti, phD (2017) <a href='mailto:ranghetti.l@irea.cnr.it'>ranghetti.l@irea.cnr.it</a></p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Luigi Ranghetti, Lorenzo Busetto.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

