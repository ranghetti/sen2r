<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Find, download and preprocess Sentinel-2 images — sen2r • sen2r: Find, Download and Process Sentinel-2 Data</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Find, download and preprocess Sentinel-2 images — sen2r" />
<meta property="og:description" content="The function is a wrapper to perform the entire
processing chain to find, download and pre-process Sentinel-2
data. Input is a set of parameters that can be passed with a
list or file (parameter param_list) or singularly (see the
descriptions of all the other parameters)." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-11080708-8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-11080708-8');
</script>


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sen2r: Find, Download and Process Sentinel-2 Data</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code"></span>
     
     Reference
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-book"></span>
     
     Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/installation.html">Installation</a>
    </li>
    <li>
      <a href="../articles/docker.html">Run in a Docker container</a>
    </li>
    <li>
      <a href="../articles/sen2r_gui.html">Using sen2r() from the GUI</a>
    </li>
    <li>
      <a href="../articles/sen2r_cmd.html">Using sen2r() from the command line</a>
    </li>
    <li>
      <a href="../articles/outstructure.html">Output file structure</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper"></span>
     
     Changelog
  </a>
</li>
<li>
  <a href="https://github.com/ranghetti/sen2r/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Find, download and preprocess Sentinel-2 images</h1>
    <small class="dont-index">Source: <a href='https://github.com/ranghetti/sen2r/blob/master/R/sen2r.R'><code>R/sen2r.R</code></a></small>
    <div class="hidden name"><code>sen2r.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The function is a wrapper to perform the entire
processing chain to find, download and pre-process Sentinel-2
data. Input is a set of parameters that can be passed with a
list or file (parameter <code>param_list</code>) or singularly (see the
descriptions of all the other parameters).</p>
    </div>

    <pre class="usage"><span class='fu'>sen2r</span>(
  <span class='kw'>param_list</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>gui</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>preprocess</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>s2_levels</span> <span class='kw'>=</span> <span class='st'>"l2a"</span>,
  <span class='kw'>sel_sensor</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"s2a"</span>, <span class='st'>"s2b"</span>),
  <span class='kw'>online</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>order_lta</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>apihub</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>downloader</span> <span class='kw'>=</span> <span class='st'>"builtin"</span>,
  <span class='kw'>overwrite_safe</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>rm_safe</span> <span class='kw'>=</span> <span class='st'>"no"</span>,
  <span class='kw'>step_atmcorr</span> <span class='kw'>=</span> <span class='st'>"auto"</span>,
  <span class='kw'>sen2cor_use_dem</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>sen2cor_gipp</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>max_cloud_safe</span> <span class='kw'>=</span> <span class='fl'>100</span>,
  <span class='kw'>timewindow</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>timeperiod</span> <span class='kw'>=</span> <span class='st'>"full"</span>,
  <span class='kw'>extent</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>extent_name</span> <span class='kw'>=</span> <span class='st'>"sen2r"</span>,
  <span class='kw'>s2tiles_selected</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>s2orbits_selected</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>list_prods</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>list_rgb</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>list_indices</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>index_source</span> <span class='kw'>=</span> <span class='st'>"BOA"</span>,
  <span class='kw'>rgb_ranges</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>mask_type</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>max_mask</span> <span class='kw'>=</span> <span class='fl'>100</span>,
  <span class='kw'>mask_smooth</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>mask_buffer</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>clip_on_extent</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>extent_as_mask</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>reference_path</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>res</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>res_s2</span> <span class='kw'>=</span> <span class='st'>"10m"</span>,
  <span class='kw'>unit</span> <span class='kw'>=</span> <span class='st'>"Meter"</span>,
  <span class='kw'>proj</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>resampling</span> <span class='kw'>=</span> <span class='st'>"near"</span>,
  <span class='kw'>resampling_scl</span> <span class='kw'>=</span> <span class='st'>"near"</span>,
  <span class='kw'>outformat</span> <span class='kw'>=</span> <span class='st'>"GTiff"</span>,
  <span class='kw'>rgb_outformat</span> <span class='kw'>=</span> <span class='st'>"GTiff"</span>,
  <span class='kw'>index_datatype</span> <span class='kw'>=</span> <span class='st'>"Int16"</span>,
  <span class='kw'>compression</span> <span class='kw'>=</span> <span class='st'>"DEFLATE"</span>,
  <span class='kw'>rgb_compression</span> <span class='kw'>=</span> <span class='st'>"90"</span>,
  <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>path_l1c</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>path_l2a</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>path_tiles</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>path_merged</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>path_out</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>path_rgb</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>path_indices</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>path_subdirs</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>thumbnails</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>processing_order</span> <span class='kw'>=</span> <span class='st'>"by_groups"</span>,
  <span class='kw'>use_python</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>tmpdir</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>rmtmp</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>log</span> <span class='kw'>=</span> <span class='fl'>NA</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>param_list</th>
      <td><p>(optional) List of input parameters:
it can be both an R list or the path of a JSON file.
If some parameters are passed both as elements of <code>param_list</code>
and as function arguments, the values passed as function
arguments are considered.
If some parameters are missing in <code>param_list</code> and are not
provided as arguments, default values will be used.
Use the function <code><a href='s2_gui.html'>s2_gui()</a></code> to create a complete list of
parameters.
If <code>param_list</code> is NULL (default), values given with the
parameters below (or default values for parameters not
provided) are used.</p></td>
    </tr>
    <tr>
      <th>gui</th>
      <td><p>(optional) Logical: if TRUE, function <code><a href='s2_gui.html'>s2_gui()</a></code> is
launched before starting to process in order to set or load parameters;
if FALSE, the function uses parameters passed with <code>param_list</code> or
with other function arguments. Default is FALSE if <code>param_list</code> is not
NULL, TRUE elsewhere.</p></td>
    </tr>
    <tr>
      <th>preprocess</th>
      <td><p>(optional) Logical: TRUE (default) to perform also
preprocessing steps, FALSE not to (do only find, download
and atmospheric correction).</p></td>
    </tr>
    <tr>
      <th>s2_levels</th>
      <td><p>(optional) Character vector of length 1 or 2, with
Sentinel-2 levels required for processing steps or as output.
This parameter is used only if <code>preprocess = FALSE</code> (otherwise, the
required levels are derived from <code>list_prods</code>).
Accepted values: "l1c" and "l2a"; default: "l2a".</p></td>
    </tr>
    <tr>
      <th>sel_sensor</th>
      <td><p>(optional) Character vector of length 1 or 2, with
Sentinel-2 sensors to be used.
Accepted values: "s2a" and "s2b"; default: c("s2a","s2b").</p></td>
    </tr>
    <tr>
      <th>online</th>
      <td><p>(optional) Logical: TRUE (default) to search for available
products on SciHub (and download if needed); FALSE to work
only with already downloaded SAFE products.</p></td>
    </tr>
    <tr>
      <th>order_lta</th>
      <td><p>(optional) Logical: TRUE (default) to order products from
the Long Term Archive if unavailable for direct download; FALSE to simply
skip them (this option has effect only in online mode).</p></td>
    </tr>
    <tr>
      <th>apihub</th>
      <td><p>Path of the text file containing credentials
of SciHub account.
If NA (default), the default location inside the package will be used.</p></td>
    </tr>
    <tr>
      <th>downloader</th>
      <td><p>(optional) Character value corresponding to the executable
which should be used to download SAFE products. It could be one among
"builtin" (default) and "aria2".
If aria2 is not installed, built-in method will be used instead.</p></td>
    </tr>
    <tr>
      <th>overwrite_safe</th>
      <td><p>(optional) Logical: TRUE to overwrite existing
products with products found online or manually corrected,
FALSE (default) to skip download and atmospheric correction for
products already existing.</p></td>
    </tr>
    <tr>
      <th>rm_safe</th>
      <td><p>(optional) Character: should SAFE products be deleted after
preprocessing? "yes" (or "all") means to delete all SAFE; "no" (default)
not to delete; "l1c" to delete only Level-1C products.</p></td>
    </tr>
    <tr>
      <th>step_atmcorr</th>
      <td><p>(optional) Character vector to determine how to obtain
Level-2A SAFE products:</p><ul>
<li><p><code>"auto"</code> (default) means that L2A is first
searched on SciHub: if found, it is downloaded, if not, the
corresponding Level-1C is downloaded and sen2cor is used to
produce L2A;</p></li>
<li><p><code>"scihub"</code> means that Sen2Cor is always used from L1C products
downloaded from SciHub;</p></li>
<li><p><code>"l2a"</code> means that they are downloaded if available on SciHub,
otherwise they are skipped (sen2cor is never used).</p></li>
</ul></td>
    </tr>
    <tr>
      <th>sen2cor_use_dem</th>
      <td><p>(optional) Logical, determining if a DEM should be
used for topographic correction by Sen2Cor (see the documentation of
<code><a href='sen2cor.html'>sen2cor()</a></code> - argument <code>use_dem</code> for further details).
Currently the default value is NA in order to grant backward compatibility:
in this case, the option set in the XML GIPP configuration file
used by sen2r (stored in the default sen2r settings directory) is respected.</p>
<p><em>Note</em>: in a future release of sen2r, the default value will be
set to TRUE, so to grant homogeneity between Level-2A products downloaded
from ESA Hub and generated using Sen2Cor.</p></td>
    </tr>
    <tr>
      <th>sen2cor_gipp</th>
      <td><p>(optional) Ground Image Processing Parameters (GIPP)
to be passed to Sen2Cor (see the documentation of <code><a href='sen2cor.html'>sen2cor()</a></code> - argument
<code>gipp</code> - for details about the usage of this argument).
Default value (NA) corresponds to an empty list of parameters.</p></td>
    </tr>
    <tr>
      <th>max_cloud_safe</th>
      <td><p>(optional) Integer number (0-100) containing
the maximum cloud level of each SAFE to be considered (default: no filter).
It it used to limit the research of SAFE products to "good" images,
so it is applied only to non-existing archives (existing SAFE are always
used).
In this sense, this parameter is different from <code>max_mask</code>, which can be
used to set a maximum cloud coverage over output extents.
Notice also that this value is used to filter on the basis of the metadata
"Cloud cover percentage" associated to each SAFE, so it is not based
on the cloud mask defined with the processing options.</p></td>
    </tr>
    <tr>
      <th>timewindow</th>
      <td><p>(optional) Temporal window for querying: Date object
of length 1 (single day) or 2 (time window). Default is NA, meaning that
no filters are used if online = FALSE, and all found images are processed;
if online = TRUE, last 90 days are processed.
Is it possible to pass also integer (or difftime) values, which are
interpreted as the last n days.</p></td>
    </tr>
    <tr>
      <th>timeperiod</th>
      <td><p>(optional) Character:</p><ul>
<li><p>"full" (default) means that all
the images included in the time window are considered;</p></li>
<li><p>"seasonal" means that only the single seasonal periods in the
window are used (i.e., with a time window from 2015-06-01 to
2017-08-31, the periods 2015-06-01 to 2015-08-31, 2016-06-01
to 2016-08-31 and 2017-06-01 to 2017-08-31 are considered).</p></li>
</ul></td>
    </tr>
    <tr>
      <th>extent</th>
      <td><p>(optional) Spatial extent on which to clip products (it can
be both the path of a vector file or a geoJSON).
Default is NA for offline mode (meaning no extent:
all found tiles are entirely used); in online mode, a sample extent is used
as default.</p></td>
    </tr>
    <tr>
      <th>extent_name</th>
      <td><p>(optional) Name of the area set as extent, to be used in
the output file names. Default is "sen2r" The name is an
alphanumeric string which cannot contain points nor underscores, and that
cannot be a five-length string with the same structure of a tile ID
(two numeric and three uppercase character values).</p></td>
    </tr>
    <tr>
      <th>s2tiles_selected</th>
      <td><p>(optional) Character vector with the Sentinel-2
tiles to be considered (default is NA, meaning all the tiles).</p></td>
    </tr>
    <tr>
      <th>s2orbits_selected</th>
      <td><p>(optional) Character vector with the Sentinel-2
orbits to be considered (still to be implemented; for now,
all the accepted values are listed).</p></td>
    </tr>
    <tr>
      <th>list_prods</th>
      <td><p>(optional) Character vector with the values of the
products to be processed (accepted values: "TOA", "BOA", "SCL",
"TCI"). Default is no one (NA).</p></td>
    </tr>
    <tr>
      <th>list_rgb</th>
      <td><p>(optional) Character vector with the values of the
RGB images to be produced.
Images are in the form RGBrgbx, where:</p><ul>
<li><p>x is B (if source is BOA) or T (is source is TOA);</p></li>
<li><p>r g and b are the the number of the bands to be used respectively
for red, green and blue, in hexadecimal format.
Notice that this is the <a href='https://earth.esa.int/web/sentinel/user-guides/sentinel-2-msi/resolutions/spatial'>actual number name of the bands</a>:
so, to use i.e. BOA band 11 (1610nm) use the value "b", even if band 11 is
the 10th band of a BOA product (because band 10 is missing).
(e.g., RGB432B, RGB843B)
Default is no one (NA).</p></li>
</ul></td>
    </tr>
    <tr>
      <th>list_indices</th>
      <td><p>(optional) Character vector with the values of the
spectral indices to be computed. Default is no one (NA).</p></td>
    </tr>
    <tr>
      <th>index_source</th>
      <td><p>(optional) Character value: if "BOA" (default), indices
are computed from BOA values; if "TOA", non corrected reflectances
are instead used (be careful to use this setting!).</p></td>
    </tr>
    <tr>
      <th>rgb_ranges</th>
      <td><p>(optional) Range of valid values to be used for RGB products.
Values must be provided in the same scale used within SAFE and BOA/TOA
products (0-10000, corresponding to reflectances * 10000).
If can be a 2-length integer vector (min-max for all the 3 bands) or a 6-length vector or
3x2 matrix (min red, min green, min blue, max red, max green, max blue).
Default is to use c(0,2500) for bands 2, 3 and 4; c(0,7500) for other bands.
In case <code>list_rgb</code> is a vector of length &gt; 1, <code>rgb_ranges</code> must be a list
of the same length (otherwise, the same range values will be used for all the RGB
products).</p></td>
    </tr>
    <tr>
      <th>mask_type</th>
      <td><p>(optional) Character value which determines the categories
in the Surface Classification Map to be masked (see <code><a href='s2_mask.html'>s2_mask()</a></code>
for the accepted values). Default (NA) is not to mask.</p></td>
    </tr>
    <tr>
      <th>max_mask</th>
      <td><p>(optional) Numeric value (range 0 to 100), which represents
the maximum percentage of allowed masked surface (by clouds or any other
type of mask chosen with argument <code>mask_type</code>) for producing outputs.
Images with a percentage of masked surface greater than <code>max_mask</code>%
are not processed (the list of expected output files which have not been
generated is returned as an attribute, named "skipped").
Default value is 80.
This parameter is different from <code>max_cloud_safe</code>, because:</p><ol>
<li><p>it is computed over the selected extent;</p></li>
<li><p>it is computed starting from the cloud mask defined as above.
Notice that the percentage is computed on non-NA values (if input images
had previously been clipped and masked using a polygon, the percentage is
computed on the surface included in the masking polygons).</p></li>
</ol></td>
    </tr>
    <tr>
      <th>mask_smooth</th>
      <td><p>(optional) Numeric positive value: the smoothing radius
(expressed in unit of measure of the output projection, typically metres)
to be applied to the cloud mask by function <a href='s2_mask.html'>s2_mask</a>.</p></td>
    </tr>
    <tr>
      <th>mask_buffer</th>
      <td><p>(optional) Numeric value: the buffering radius
(expressed in unit of measure of the output projection, typically metres)
to be applied to the cloud mask by function <a href='s2_mask.html'>s2_mask</a>.
Default value (0) means that no buffer is applied; a positive value causes
an enlargement of the masked area; a negative value cause a reduction.</p></td>
    </tr>
    <tr>
      <th>clip_on_extent</th>
      <td><p>(optional) Logical: if TRUE (default), output products
and indices are clipped to the selected extent (and resampled/reprojected);
if FALSE, the geometry and extension of the tiles is maintained.</p></td>
    </tr>
    <tr>
      <th>extent_as_mask</th>
      <td><p>(optional) Logical: if TRUE, pixel values outside
the <code>extent</code> polygon are set to NA; if FALSE (default), all the values
within the bounding box are maintained.</p></td>
    </tr>
    <tr>
      <th>reference_path</th>
      <td><p>(optional) Path of the raster file to be used as a
reference grid. If NA (default), no reference is used.</p></td>
    </tr>
    <tr>
      <th>res</th>
      <td><p>(optional) Numeric vector of length 2 with the x-y resolution
for output products. Default (NA) means that the resolution
is kept as native.</p></td>
    </tr>
    <tr>
      <th>res_s2</th>
      <td><p>(optional) Character value corresponding to the native Sentinel-2
resolution to be used. Accepted values are "10m" (default), "20m"
and "60m".</p></td>
    </tr>
    <tr>
      <th>unit</th>
      <td><p>(optional) Character value corresponding to the unit of measure
with which to interpret the resolution (for now, only "Meter" -
the default value - is supported).</p></td>
    </tr>
    <tr>
      <th>proj</th>
      <td><p>(optional) Character string with the pro4string of the output
resolution. default value (NA) means not to reproject.</p></td>
    </tr>
    <tr>
      <th>resampling</th>
      <td><p>(optional) Resampling method (one of the values supported
by <code>gdal_translate</code>: <code>"near"</code> (default), <code>"bilinear"</code>, <code>"cubic"</code>,
<code>"cubicspline"</code>, <code>"lanczos"</code>, <code>"average"</code> or <code>"mode"</code>).</p></td>
    </tr>
    <tr>
      <th>resampling_scl</th>
      <td><p>(optional) Resampling method for categorical products
(for now, only SCL): one among <code>"near"</code> (default) and <code>"mode"</code>.</p></td>
    </tr>
    <tr>
      <th>outformat</th>
      <td><p>(optional) Format of the output file (in a
format recognised by GDAL). Default is <code>"GTiff"</code>.
Value <code>"BigTIFF"</code> can be used to generate a GeoTIFF with the option BigTIFF</p></td>
    </tr>
    <tr>
      <th>rgb_outformat</th>
      <td><p>(optional) Format of the output RGB products (in a
format recognised by GDAL). Default is <code>"GTiff"</code>.</p></td>
    </tr>
    <tr>
      <th>index_datatype</th>
      <td><p>(optional) Numeric datatype of the output
spectral indices (see <a href='s2_calcindices.html'>s2_calcindices</a>.</p></td>
    </tr>
    <tr>
      <th>compression</th>
      <td><p>(optional) In the case GTiff is chosen as
output format, the compression indicated with this parameter is
used (default is "DEFLATE").</p></td>
    </tr>
    <tr>
      <th>rgb_compression</th>
      <td><p>(optional) In the case <code>GTiff</code> is chosen as
output format for RGB products, the compression indicated
with this parameter is used (default is <code>"DEFLATE"</code>).
In the cases GTiff or JPEG are chosen as output format for RGB products,
this parameter can also be a 1-100 integer value, which is interpreted
as the compression level for a JPEG compression.</p></td>
    </tr>
    <tr>
      <th>overwrite</th>
      <td><p>(optional) Logical value: should existing output
files be overwritten? (default: FALSE).</p></td>
    </tr>
    <tr>
      <th>path_l1c</th>
      <td><p>(optional) Path of the directory in which Level-1C SAFE
products are searched and/or downloaded. If not provided (default), a
temporary directory is used.</p></td>
    </tr>
    <tr>
      <th>path_l2a</th>
      <td><p>(optional) Path of the directory in which Level-2A SAFE
products are searched, downloaded and/or generated. If not provided
(default), a temporary directory is used.</p></td>
    </tr>
    <tr>
      <th>path_tiles</th>
      <td><p>(optional) Path of the directory in which Sentinel-2
tiles (as generated by <a href='s2_translate.html'>s2_translate</a>) are searched and/or generated.
If not provided (default), a temporary directory is used, and files
are generated as virtual rasters; otherwise, they are generated in
the format specified with <code>outformat</code> parameter.</p></td>
    </tr>
    <tr>
      <th>path_merged</th>
      <td><p>(optional) Path of the directory in which Sentinel-2
tiles merged by orbit (as generated by <a href='s2_merge.html'>s2_merge</a>) are searched and/or
generated.
If not provided (default), a temporary directory is used, and files
are generated as virtual rasters; otherwise, they are generated in
the format specified with <code>outformat</code> parameter.</p></td>
    </tr>
    <tr>
      <th>path_out</th>
      <td><p>(optional) Path of the directory in which Sentinel-2
output products are searched and/or generated.
If not provided (default), a temporary directory is used.</p></td>
    </tr>
    <tr>
      <th>path_rgb</th>
      <td><p>(optional) Path of the directory in RGB products
are searched and/or generated.
If not provided (default), <code>path_out</code> is used.</p></td>
    </tr>
    <tr>
      <th>path_indices</th>
      <td><p>(optional) Path of the directory in which files of
spectral indices are searched and/or generated.
If not provided (default), <code>path_out</code> is used.</p></td>
    </tr>
    <tr>
      <th>path_subdirs</th>
      <td><p>(optional) Logical: if TRUE (default), a directory
for each output product or spectral index is generated within
<code>path_tiles</code>, <code>path_merged</code>, <code>path_out</code> and <code>path_indices</code>; if FALSE,
products are put directly within them.</p></td>
    </tr>
    <tr>
      <th>thumbnails</th>
      <td><p>(optional) Logical: if TRUE (default), a thumbnail is
added for each product created. Thumbnails are JPEG or PNG georeferenced
small images (width or height of 1024 pixels) with default colour palettes
(for more details, see the help window in the GUI). They are placed in
a subdirectory of the products names <code>"thumbnails"</code>.
If FALSE, they are not created.</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>(optional) Logical or integer: setting to TRUE, the processing
is executed using multiple cores in order to speed up the execution.
Parallelisation is performed on groups of dates.
The number of cores is automatically determined; specifying it is also
possible (e.g. <code>parallel = 4</code>).
If FALSE (default), the processing chain is forced to run with a single core
(this can be useful if multiple sen2r instances are run in parallel).</p></td>
    </tr>
    <tr>
      <th>processing_order</th>
      <td><p>(optional) Character string:
order used to execute the processing chain (this affects the speed
of computation and the usage of system resources).
Values can be one of the followings:</p><ul>
<li><p><code>"4"</code> or <code>"by_groups"</code> (default):
it provides a good compromise between processing speed and disk usage.
Processing is done as follows:</p><ol>
<li><p>the list of required SAFE and output product names is computed;</p></li>
<li><p>the required dates are grouped in $g$ groups, where
$g$ is the number of dates divided by the number of CPU;</p></li>
<li><p>groups are then processed sequentially; for each group:</p><ul>
<li><p>the required SAFE archives are downloaded;</p></li>
<li><p>Sen2Cor is applied in parallel using one core per L1C SAFE archive;</p></li>
<li><p>the remaining processing operations are executed using parallel
R sessions (one core for each date).</p></li>
</ul></li>
</ol></li>
<li><p><code>"2"</code> or <code>"by_date"</code>:
this allows minimising the requirements of disk usage
(in particular if SAFE archives are deleted after processing).
It is similar to the default execution, but each group is composed
by a single date: so the disk space occupied by SAFE archives
and temporary files is lower,
but it is generally slower than the default one because
parallel computation over dates for products' generation is not possible.</p></li>
<li><p><code>"3"</code> or <code>"mixed"</code>:
this allows maximising CPU usage and processing speed.
The cycle on groups is ignored, and all the required SAFE are
first of all downloaded and/or produced, and then dates are
processed in parallel.
This mode is faster than the default mode, but it requires
all SAFE archives to be downloaded and processed before performing
subsequent steps, thus increasing disk space requirements.</p></li>
<li><p><code>"1"</code> or <code>"by_step"</code>:
this is the legacy mode, in which the cycle on groups is ignored
as well as the parallel computation over dates.
All SAFE archives are first downloaded/processed,
then the processing steps are performed sequentially.
This mode is similar to the previous one in terms of disk usage
but it is slightly slower; its advantage are the lower RAM requirements.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>use_python</th>
      <td><p>Deprecated argument</p></td>
    </tr>
    <tr>
      <th>tmpdir</th>
      <td><p>(optional) Path where intermediate files will be created.
Default is a temporary directory (unless <code>outformat = "VRT"</code>: in this case,
default is a subdirectory named ".vrt" within <code>path_out</code>).</p></td>
    </tr>
    <tr>
      <th>rmtmp</th>
      <td><p>(optional) Logical: should temporary files be removed?
(Default: TRUE). <code>rmtmp</code> is forced to <code>FALSE</code> if <code>outformat = "VRT"</code>.</p></td>
    </tr>
    <tr>
      <th>log</th>
      <td><p>(optional) Character string with the path where the package
messages will be redirected.
Default (NA) is not to redirect (use standard output).
A two-length character with two paths (which can also coincide)
can be used to redirect also the output: in this case, the first path
is the path for messages, the second one for the output.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A vector with the paths of the files which were created (excluded
the temporary files); NULL otherwise.
The vector includes some attributes:</p><ul>
<li><p><code>cloudcovered</code> with the list of images not created due to the higher
percentage of cloud covered pixels;</p></li>
<li><p><code>missing</code> with the list of images not created due to other reasons;</p></li>
<li><p><code>procpath</code> with the path of a json parameter file, created after each
<code>sen2r()</code> run, containing the parameters used in the execution of the
function;</p></li>
<li><p><code>ltapath</code> with the path of a json file containing the list of the
SAFE Sentinel-2 archives eventually ordered in Long Term Archive.</p></li>
<li><p><code>status</code> with a data.frame summarising the status of the processing (see
<code><a href='sen2r_process_report.html'>sen2r_process_report()</a></code>).</p></li>
</ul>

    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>License: GPL 3.0</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='co'># Open an interactive section</span>
<span class='kw'>if</span> (<span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span>()) {
  <span class='fu'>sen2r</span>()
}

<span class='co'># Launch a processing from a saved JSON file (here we use an internal function</span>
<span class='co'># to create a testing json file - this is not intended to be used by final users)</span>
<span class='no'>json_path</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='build_example_param_file.html'>build_example_param_file</a></span>()

<span class='no'>out_paths_2</span> <span class='kw'>&lt;-</span> <span class='fu'>sen2r</span>(<span class='no'>json_path</span>)</div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:13] #### Starting sen2r execution. ####</span></div><div class='output co'>#&gt; <span class='message'>Loading required namespace: stringi</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:14] Searching for available SAFE products on</span>
#&gt; <span class='message'>       SciHub...</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:17] Computing output names...</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:19] Starting to download the required level-2A SAFE</span>
#&gt; <span class='message'>       products.</span></div><div class='output co'>#&gt; <span class='message'>Images</span>
#&gt; <span class='message'>S2A_MSIL2A_20190723T101031_N0213_R022_T32TNS_20190723T125722.SAFE are</span>
#&gt; <span class='message'>already on your system and will be skipped. Set "overwrite_safe" to</span>
#&gt; <span class='message'>TRUE to re-download them.</span></div><div class='output co'>#&gt; <span class='message'>No L2A images are needed.</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:19] Download of level-2A SAFE products terminated.</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:19] Starting to download the required level-1C SAFE</span>
#&gt; <span class='message'>       products.</span></div><div class='output co'>#&gt; <span class='message'>No L1C images are needed.</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:19] Download of level-1C SAFE products terminated.</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:19] Updating output names...</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:20] Starting to translate SAFE products in custom</span>
#&gt; <span class='message'>       format.</span></div><div class='output co'>#&gt; <span class='message'>GDAL version in use: 2.2.3</span></div><div class='output co'>#&gt; <span class='message'>Using UTM zone 32N.</span></div><div class='output co'>#&gt; <span class='message'>2 output files were correctly created.</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:21] Starting to merge tiles by orbit.</span></div><div class='output co'>#&gt; <span class='message'>Using projection "EPSG:32632".</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:21] Starting to edit geometry (clip, reproject,</span>
#&gt; <span class='message'>       rescale).</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:23] Producing required RGB images.</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:24] Generating image</span>
#&gt; <span class='message'>       S2A2A_20190723_022_sen2r_RGB432B_10.tif...</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:24] Generating image</span>
#&gt; <span class='message'>       S2A2A_20190723_022_sen2r_RGB843B_10.tif...</span></div><div class='output co'>#&gt; <span class='message'>2 output RGB files were correctly created.</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:25] Computing required spectral indices.</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:26] Computing index MSAVI2 on date 2019-07-23...</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:27] Computing index NDVI on date 2019-07-23...</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:29] Generating thumbnails.</span></div><div class='output co'>#&gt; <span class='message'>6 output files were correctly created.</span></div><div class='output co'>#&gt; <span class='message'>╔══════════════════════════════════════════════════════════════════════</span>
#&gt; <span class='message'>║ sen2r Processing Report</span>
#&gt; <span class='message'>╟──────────────────────────────────────────────────────────────────────</span></div><div class='output co'>#&gt; <span class='message'>║ Dates to be processed based on processing parameters: 1</span></div><div class='output co'>#&gt; <span class='message'>║ Processing completed for: all expected dates.</span></div><div class='output co'>#&gt; <span class='message'>╚══════════════════════════════════════════════════════════════════════</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:31] #### sen2r session terminated. ####</span></div><div class='output co'>#&gt; <span class='message'>The processing chain can be re-launched with the command:</span>
#&gt; <span class='message'>  sen2r("/home/lranghetti/.sen2r/proc_par/s2proc_20200317_102213.json")</span></div><div class='input'><span class='co'># Notice that passing the path of a JSON file results in launching</span>
<span class='co'># a session without opening the gui, unless gui = TRUE is passed.</span>

<span class='co'># Launch a processing using function arguments</span>
<span class='no'>safe_dir</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/basename.html'>dirname</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span>(<span class='fu'><a href='load_binpaths.html'>load_binpaths</a></span>(), <span class='st'>"path"</span>)), <span class='st'>"safe"</span>)
<span class='no'>out_dir_3</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span>(<span class='kw'>pattern</span> <span class='kw'>=</span> <span class='st'>"Barbellino_"</span>)
<span class='no'>out_paths_3</span> <span class='kw'>&lt;-</span> <span class='fu'>sen2r</span>(
  <span class='kw'>gui</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>step_atmcorr</span> <span class='kw'>=</span> <span class='st'>"l2a"</span>,
  <span class='kw'>extent</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"extdata/vector/barbellino.geojson"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"sen2r"</span>),
  <span class='kw'>extent_name</span> <span class='kw'>=</span> <span class='st'>"Barbellino"</span>,
  <span class='kw'>timewindow</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span>(<span class='st'>"2017-07-03"</span>),
  <span class='kw'>list_prods</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"TOA"</span>,<span class='st'>"BOA"</span>,<span class='st'>"SCL"</span>),
  <span class='kw'>list_indices</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"NDVI"</span>,<span class='st'>"MSAVI2"</span>),
  <span class='kw'>list_rgb</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"RGB432T"</span>, <span class='st'>"RGB432B"</span>, <span class='st'>"RGB843B"</span>),
  <span class='kw'>mask_type</span> <span class='kw'>=</span> <span class='st'>"cloud_medium_proba"</span>,
  <span class='kw'>max_mask</span> <span class='kw'>=</span> <span class='fl'>80</span>,
  <span class='kw'>path_l1c</span> <span class='kw'>=</span> <span class='no'>safe_dir</span>,
  <span class='kw'>path_l2a</span> <span class='kw'>=</span> <span class='no'>safe_dir</span>,
  <span class='kw'>path_out</span> <span class='kw'>=</span> <span class='no'>out_dir_3</span>
)</div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:32] #### Starting sen2r execution. ####</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:33] Searching for available SAFE products on</span>
#&gt; <span class='message'>       SciHub...</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:38] Ordering 1 Sentinel-2 images stored in the Long</span>
#&gt; <span class='message'>       Term Archive...</span></div><div class='output co'>#&gt; <span class='message'>Request failed [500]. Retrying in 1.4 seconds...</span></div><div class='output co'>#&gt; <span class='message'>Request failed [500]. Retrying in 3.8 seconds...</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:44] 1 of 1 Sentinel-2 images were not correctly</span>
#&gt; <span class='message'>       ordered (HTML status code: 500).</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:44] Computing output names...</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:45] No S2 products matching the query settings were</span>
#&gt; <span class='message'>       found; please specify less restrictive settings.</span></div><div class='output co'>#&gt; <span class='message'>╔══════════════════════════════════════════════════════════════════════</span>
#&gt; <span class='message'>║ sen2r Processing Report</span>
#&gt; <span class='message'>╟──────────────────────────────────────────────────────────────────────</span></div><div class='output co'>#&gt; <span class='message'>║ Dates to be processed based on processing parameters: 1</span></div><div class='output co'>#&gt; <span class='message'>║ Processing completed for: 0 out of 1 expected dates.</span></div><div class='output co'>#&gt; <span class='message'>║ Outputs for: 1 out of 1 expected dates not created because all/some</span>
#&gt; <span class='message'>║ required images are currently offline.</span></div><div class='output co'>#&gt; <span class='message'>║ Order for: 1 out of 1 offline images failed due to exceeded user</span>
#&gt; <span class='message'>║ quota or other reasons.</span></div><div class='output co'>#&gt; <span class='message'>║ You can try placing the order again later with the command:</span>
#&gt; <span class='message'>║   s2_order("/home/lranghetti/.sen2r/lta_orders/lta_20200317_102244.json")</span></div><div class='output co'>#&gt; <span class='message'>║ You can check later if the ordered images are with the command:</span>
#&gt; <span class='message'>║   safe_is_online("/home/lranghetti/.sen2r/lta_orders/lta_20200317_102244.json")</span></div><div class='output co'>#&gt; <span class='message'>║ When additional images are online, you can relaunch the processing</span>
#&gt; <span class='message'>║ chain using the command:</span>
#&gt; <span class='message'>║   sen2r("/home/lranghetti/.sen2r/proc_par/s2proc_20200317_102232.json")</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Processing was not completed because some required images are offline</span>
#&gt; <span class='warning'>(see the processing log).</span></div><div class='output co'>#&gt; <span class='message'>╚══════════════════════════════════════════════════════════════════════</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:45] #### sen2r session terminated. ####</span></div><div class='output co'>#&gt; <span class='message'>The processing chain can be re-launched with the command:</span>
#&gt; <span class='message'>  sen2r("/home/lranghetti/.sen2r/proc_par/s2proc_20200317_102232.json")</span></div><div class='input'>
<span class='co'># Launch a processing based on a JSON file, but changing some parameters</span>
<span class='co'># (e.g., the same processing on a different extent)</span>
<span class='no'>out_dir_4</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span>(<span class='kw'>pattern</span> <span class='kw'>=</span> <span class='st'>"Scalve_"</span>)
<span class='no'>out_paths_4</span> <span class='kw'>&lt;-</span> <span class='fu'>sen2r</span>(
  <span class='kw'>param_list</span> <span class='kw'>=</span> <span class='no'>json_path</span>,
  <span class='kw'>extent</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"extdata/vector/scalve.kml"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"sen2r"</span>),
  <span class='kw'>extent_name</span> <span class='kw'>=</span> <span class='st'>"Scalve"</span>,
  <span class='kw'>path_out</span> <span class='kw'>=</span> <span class='no'>out_dir_4</span>
)</div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:45] #### Starting sen2r execution. ####</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:45] Searching for available SAFE products on</span>
#&gt; <span class='message'>       SciHub...</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:48] Computing output names...</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:50] Starting to download the required level-2A SAFE</span>
#&gt; <span class='message'>       products.</span></div><div class='output co'>#&gt; <span class='message'>Images</span>
#&gt; <span class='message'>S2A_MSIL2A_20190723T101031_N0213_R022_T32TNR_20190723T125722.SAFE,</span>
#&gt; <span class='message'>S2A_MSIL2A_20190723T101031_N0213_R022_T32TNS_20190723T125722.SAFE are</span>
#&gt; <span class='message'>already on your system and will be skipped. Set "overwrite_safe" to</span>
#&gt; <span class='message'>TRUE to re-download them.</span></div><div class='output co'>#&gt; <span class='message'>No L2A images are needed.</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:50] Download of level-2A SAFE products terminated.</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:50] Starting to download the required level-1C SAFE</span>
#&gt; <span class='message'>       products.</span></div><div class='output co'>#&gt; <span class='message'>No L1C images are needed.</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:50] Download of level-1C SAFE products terminated.</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:50] Updating output names...</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:50] Starting to translate SAFE products in custom</span>
#&gt; <span class='message'>       format.</span></div><div class='output co'>#&gt; <span class='message'>GDAL version in use: 2.2.3</span></div><div class='output co'>#&gt; <span class='message'>Using UTM zone 32N.</span></div><div class='output co'>#&gt; <span class='message'>2 output files were correctly created.</span></div><div class='output co'>#&gt; <span class='message'>GDAL version in use: 2.2.3</span></div><div class='output co'>#&gt; <span class='message'>Using UTM zone 32N.</span></div><div class='output co'>#&gt; <span class='message'>2 output files were correctly created.</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:52] Starting to merge tiles by orbit.</span></div><div class='output co'>#&gt; <span class='message'>Using projection "EPSG:32632".</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:22:53] Starting to edit geometry (clip, reproject,</span>
#&gt; <span class='message'>       rescale).</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:23:06] Producing required RGB images.</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:23:06] Generating image</span>
#&gt; <span class='message'>       S2A2A_20190723_022_Scalve_RGB432B_10.tif...</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:23:09] Generating image</span>
#&gt; <span class='message'>       S2A2A_20190723_022_Scalve_RGB843B_10.tif...</span></div><div class='output co'>#&gt; <span class='message'>2 output RGB files were correctly created.</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:23:14] Computing required spectral indices.</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:23:14] Computing index MSAVI2 on date 2019-07-23...</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:23:19] Computing index NDVI on date 2019-07-23...</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:23:23] Generating thumbnails.</span></div><div class='output co'>#&gt; <span class='message'>6 output files were correctly created.</span></div><div class='output co'>#&gt; <span class='message'>╔══════════════════════════════════════════════════════════════════════</span>
#&gt; <span class='message'>║ sen2r Processing Report</span>
#&gt; <span class='message'>╟──────────────────────────────────────────────────────────────────────</span></div><div class='output co'>#&gt; <span class='message'>║ Dates to be processed based on processing parameters: 2</span></div><div class='output co'>#&gt; <span class='message'>║ Processing completed for: all expected dates.</span></div><div class='output co'>#&gt; <span class='message'>╚══════════════════════════════════════════════════════════════════════</span></div><div class='output co'>#&gt; <span class='message'>[2020-03-17 10:23:30] #### sen2r session terminated. ####</span></div><div class='output co'>#&gt; <span class='message'>The processing chain can be re-launched with the command:</span>
#&gt; <span class='message'>  sen2r("/home/lranghetti/.sen2r/proc_par/s2proc_20200317_102245.json")</span></div><div class='input'>

<span class='co'># Show outputs (loading thumbnails)</span>

<span class='co'># Generate thumbnails names</span>
<span class='no'>thumb_3</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/basename.html'>dirname</a></span>(<span class='no'>out_paths_3</span>), <span class='st'>"thumbnails"</span>, <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span>(<span class='st'>"tif$"</span>, <span class='st'>"jpg"</span>, <span class='fu'><a href='https://rdrr.io/r/base/basename.html'>basename</a></span>(<span class='no'>out_paths_3</span>)))
<span class='no'>thumb_3</span>[<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span>(<span class='st'>"SCL"</span>, <span class='no'>thumb_3</span>)] <span class='kw'>&lt;-</span>
  <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span>(<span class='st'>"jpg$"</span>, <span class='st'>"png"</span>, <span class='no'>thumb_3</span>[<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span>(<span class='st'>"SCL"</span>, <span class='no'>thumb_3</span>)])
<span class='no'>thumb_4</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/basename.html'>dirname</a></span>(<span class='no'>out_paths_4</span>), <span class='st'>"thumbnails"</span>, <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span>(<span class='st'>"tif$"</span>, <span class='st'>"jpg"</span>, <span class='fu'><a href='https://rdrr.io/r/base/basename.html'>basename</a></span>(<span class='no'>out_paths_4</span>)))
<span class='no'>thumb_4</span>[<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span>(<span class='st'>"SCL"</span>, <span class='no'>thumb_4</span>)] <span class='kw'>&lt;-</span>
  <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span>(<span class='st'>"jpg$"</span>, <span class='st'>"png"</span>, <span class='no'>thumb_4</span>[<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span>(<span class='st'>"SCL"</span>, <span class='no'>thumb_4</span>)])

<span class='no'>oldpar</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span>(<span class='kw'>mfrow</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>2</span>), <span class='kw'>mar</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>0</span>,<span class='fl'>4</span>))
<span class='fu'><a href='https://rdrr.io/r/graphics/image.html'>image</a></span>(<span class='kw pkg'>stars</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/stars/man/read_stars.html'>read_stars</a></span>(<span class='no'>thumb_3</span>[<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span>(<span class='st'>"BOA"</span>, <span class='no'>thumb_3</span>)]), <span class='kw'>rgb</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: coercing argument of type 'list' to logical</span></div><div class='output co'>#&gt; <span class='error'>Error in if (!np || any(sapply(prefixes, has_prefix, x = .x))) .x else normalizePath(.x,     mustWork = FALSE): valore mancante dove è richiesto TRUE/FALSE</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/image.html'>image</a></span>(<span class='kw pkg'>stars</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/stars/man/read_stars.html'>read_stars</a></span>(<span class='no'>thumb_3</span>[<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span>(<span class='st'>"SCL"</span>, <span class='no'>thumb_3</span>)]), <span class='kw'>rgb</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: coercing argument of type 'list' to logical</span></div><div class='output co'>#&gt; <span class='error'>Error in if (!np || any(sapply(prefixes, has_prefix, x = .x))) .x else normalizePath(.x,     mustWork = FALSE): valore mancante dove è richiesto TRUE/FALSE</span></div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span>(<span class='kw'>mfrow</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>2</span>), <span class='kw'>mar</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>0</span>,<span class='fl'>4</span>))
<span class='fu'><a href='https://rdrr.io/r/graphics/image.html'>image</a></span>(<span class='kw pkg'>stars</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/stars/man/read_stars.html'>read_stars</a></span>(<span class='no'>thumb_3</span>[<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span>(<span class='st'>"MSAVI2"</span>, <span class='no'>thumb_3</span>)]), <span class='kw'>rgb</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: coercing argument of type 'list' to logical</span></div><div class='output co'>#&gt; <span class='error'>Error in if (!np || any(sapply(prefixes, has_prefix, x = .x))) .x else normalizePath(.x,     mustWork = FALSE): valore mancante dove è richiesto TRUE/FALSE</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/image.html'>image</a></span>(<span class='kw pkg'>stars</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/stars/man/read_stars.html'>read_stars</a></span>(<span class='no'>thumb_3</span>[<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span>(<span class='st'>"NDVI"</span>, <span class='no'>thumb_3</span>)]), <span class='kw'>rgb</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: coercing argument of type 'list' to logical</span></div><div class='output co'>#&gt; <span class='error'>Error in if (!np || any(sapply(prefixes, has_prefix, x = .x))) .x else normalizePath(.x,     mustWork = FALSE): valore mancante dove è richiesto TRUE/FALSE</span></div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span>(<span class='kw'>mfrow</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>2</span>), <span class='kw'>mar</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>0</span>,<span class='fl'>4</span>))
<span class='fu'><a href='https://rdrr.io/r/graphics/image.html'>image</a></span>(<span class='kw pkg'>stars</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/stars/man/read_stars.html'>read_stars</a></span>(<span class='no'>thumb_3</span>[<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span>(<span class='st'>"RGB432B"</span>, <span class='no'>thumb_3</span>)]), <span class='kw'>rgb</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: coercing argument of type 'list' to logical</span></div><div class='output co'>#&gt; <span class='error'>Error in if (!np || any(sapply(prefixes, has_prefix, x = .x))) .x else normalizePath(.x,     mustWork = FALSE): valore mancante dove è richiesto TRUE/FALSE</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/image.html'>image</a></span>(<span class='kw pkg'>stars</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/stars/man/read_stars.html'>read_stars</a></span>(<span class='no'>thumb_3</span>[<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span>(<span class='st'>"RGB843B"</span>, <span class='no'>thumb_3</span>)]), <span class='kw'>rgb</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: coercing argument of type 'list' to logical</span></div><div class='output co'>#&gt; <span class='error'>Error in if (!np || any(sapply(prefixes, has_prefix, x = .x))) .x else normalizePath(.x,     mustWork = FALSE): valore mancante dove è richiesto TRUE/FALSE</span></div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span>(<span class='kw'>mfrow</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>2</span>), <span class='kw'>mar</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>0</span>,<span class='fl'>4</span>))
<span class='fu'><a href='https://rdrr.io/r/graphics/image.html'>image</a></span>(<span class='kw pkg'>stars</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/stars/man/read_stars.html'>read_stars</a></span>(<span class='no'>thumb_4</span>[<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span>(<span class='st'>"BOA"</span>, <span class='no'>thumb_4</span>)]), <span class='kw'>rgb</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>)
<span class='fu'><a href='https://rdrr.io/r/graphics/image.html'>image</a></span>(<span class='kw pkg'>stars</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/stars/man/read_stars.html'>read_stars</a></span>(<span class='no'>thumb_4</span>[<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span>(<span class='st'>"SCL"</span>, <span class='no'>thumb_4</span>)]), <span class='kw'>rgb</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>)</div><div class='img'><img src='sen2r-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span>(<span class='kw'>mfrow</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>2</span>), <span class='kw'>mar</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>0</span>,<span class='fl'>4</span>))
<span class='fu'><a href='https://rdrr.io/r/graphics/image.html'>image</a></span>(<span class='kw pkg'>stars</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/stars/man/read_stars.html'>read_stars</a></span>(<span class='no'>thumb_4</span>[<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span>(<span class='st'>"MSAVI2"</span>, <span class='no'>thumb_4</span>)]), <span class='kw'>rgb</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>)
<span class='fu'><a href='https://rdrr.io/r/graphics/image.html'>image</a></span>(<span class='kw pkg'>stars</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/stars/man/read_stars.html'>read_stars</a></span>(<span class='no'>thumb_4</span>[<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span>(<span class='st'>"NDVI"</span>, <span class='no'>thumb_4</span>)]), <span class='kw'>rgb</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>)</div><div class='img'><img src='sen2r-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span>(<span class='kw'>mfrow</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>2</span>), <span class='kw'>mar</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>0</span>,<span class='fl'>4</span>))
<span class='fu'><a href='https://rdrr.io/r/graphics/image.html'>image</a></span>(<span class='kw pkg'>stars</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/stars/man/read_stars.html'>read_stars</a></span>(<span class='no'>thumb_4</span>[<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span>(<span class='st'>"RGB432B"</span>, <span class='no'>thumb_4</span>)]), <span class='kw'>rgb</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>)
<span class='fu'><a href='https://rdrr.io/r/graphics/image.html'>image</a></span>(<span class='kw pkg'>stars</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/stars/man/read_stars.html'>read_stars</a></span>(<span class='no'>thumb_4</span>[<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span>(<span class='st'>"RGB843B"</span>, <span class='no'>thumb_4</span>)]), <span class='kw'>rgb</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>)</div><div class='img'><img src='sen2r-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span>(<span class='no'>oldpar</span>)
<span class='co'># }</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#note">Note</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Luigi Ranghetti, phD (2020) <a href='mailto:luigi@ranghetti.info'>luigi@ranghetti.info</a></p>
<p>Lorenzo Busetto, phD (2020) <a href='mailto:lbusett@gmail.com'>lbusett@gmail.com</a></p>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Luigi Ranghetti, Lorenzo Busetto.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


