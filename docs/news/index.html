<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Changelog • sen2r: Find, Download and Process Sentinel-2 Data</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Changelog" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-11080708-8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-11080708-8');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-news">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sen2r: Find, Download and Process Sentinel-2 Data</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code"></span>
     
     Reference
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-book"></span>
     
     Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/installation.html">Installation</a>
    </li>
    <li>
      <a href="../articles/docker.html">Run in a Docker container</a>
    </li>
    <li>
      <a href="../articles/sen2r_gui.html">Using sen2r() from the GUI</a>
    </li>
    <li>
      <a href="../articles/sen2r_cmd.html">Using sen2r() from the command line</a>
    </li>
    <li>
      <a href="../articles/outstructure.html">Output file structure</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper"></span>
     
     Changelog
  </a>
</li>
<li>
  <a href="https://github.com/ranghetti/sen2r/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href='https://github.com/ranghetti/sen2r/blob/master/NEWS.md'><code>NEWS.md</code></a></small>
    </div>

    <div id="version-1-3-4" class="section level1">
<h1 class="page-header" data-toc-text="1.3.4">
<a href="#version-1-3-4" class="anchor"></a>Version 1.3.4<small> 2020-04-22 </small>
</h1>
<div id="new-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#new-functions" class="anchor"></a>New functions</h2>
<ul>
<li>
<code><a href="../reference/gdalUtil.html">gdalUtil()</a></code>: function used to perform GDAL operations, calling C-based GDAL utilities using <code><a href="https://rdrr.io/pkg/sf/man/gdal_utils.html">sf::gdal_utils()</a></code>, and Python-based ones through system calls (a standalone GDAL environment is request to do it, as it was in previous versions).</li>
</ul>
</div>
<div id="documentation" class="section level2">
<h2 class="hasAnchor">
<a href="#documentation" class="anchor"></a>Documentation</h2>
<ul>
<li>Improve documentation of vignette “Output file structure”, including the description of output products.</li>
</ul>
</div>
<div id="new-dependency" class="section level2">
<h2 class="hasAnchor">
<a href="#new-dependency" class="anchor"></a>New dependency</h2>
<ul>
<li>
<strong><code>rgdal</code></strong> is now an explicit dependency (this because it is used by <strong><code>raster</code></strong> but it is not a mandatory dependency).</li>
</ul>
</div>
<div id="minor-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-changes" class="anchor"></a>Minor changes</h2>
<ul>
<li>GDAL C-based utilities are called using internal GDAL routines in package <strong><code>sf</code></strong> (see <code><a href="../reference/gdalUtil.html">gdalUtil()</a></code>). This allows reducing the use of external runtime dependencies.</li>
<li>GDAL messages are suppressed if the suggested dependency <strong><code>sys</code></strong> is installed (<a href='https://github.com/ranghetti/sen2r/issues/257'>#257</a>).</li>
<li>The new section of the vignette “Output file documentation” regarding products is linked in the GUI.</li>
</ul>
</div>
<div id="bug-fixes" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes" class="anchor"></a>Bug fixes</h2>
<ul>
<li>Re-fix <a href='https://github.com/ranghetti/sen2r/issues/292'>#292</a>.</li>
<li>Fix <a href='https://github.com/ranghetti/sen2r/issues/308'>#308</a>.</li>
</ul>
</div>
</div>
    <div id="version-1-3-3" class="section level1">
<h1 class="page-header" data-toc-text="1.3.3">
<a href="#version-1-3-3" class="anchor"></a>Version 1.3.3<small> 2020-03-30 </small>
</h1>
<div id="major-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#major-changes" class="anchor"></a>Major changes</h2>
<ul>
<li>Move the list of ignored / cloud-covered images in the output path (<a href='https://github.com/ranghetti/sen2r/issues/271'>#271</a>): before this release, two files (<code>*_ignorelist.txt</code> and <code>*_cloudlist.txt</code>) were created in the directory of the parameter file (if existing) and used, during subsequent <code><a href="../reference/sen2r.html">sen2r()</a></code> executions, in order not to try reprocessing images cloud covered or failed for some reason. Now these files were replaced with an hidden TOML file <code>.ignorelist.txt</code> containing the list of base names of non-produced files and the dates of cloud covered images. This file is placed in the output folder, so to be linked with the produced archive. The usefulness of this edit is twofold:
<ol>
<li>this information is strictly linked with the produced output files, and can be generated even in the case a parameter JSON file is not used;</li>
<li>using cloud-covered dates instead of file names, additional products (e.g. spectral indices added at a later time) related to a date which is known to be cloud-covered are automatically skipped.</li>
</ol>
</li>
</ul>
</div>
<div id="new-dependency-1" class="section level2">
<h2 class="hasAnchor">
<a href="#new-dependency-1" class="anchor"></a>New dependency</h2>
<ul>
<li>
<strong><code>RcppTOML</code></strong> (used to manage TOML ignore list TOML file).</li>
</ul>
</div>
<div id="documentation-1" class="section level2">
<h2 class="hasAnchor">
<a href="#documentation-1" class="anchor"></a>Documentation</h2>
<ul>
<li>Improve the installation page.</li>
</ul>
</div>
<div id="bug-fixes-1" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes-1" class="anchor"></a>Bug fixes</h2>
<ul>
<li>Support for <strong><code>sf</code></strong> &gt;= 0.9 (<a href='https://github.com/ranghetti/sen2r/issues/260'>#260</a>)</li>
<li>Patch for <strong><code>stars</code></strong> issue, made to resolve the temporary incompatibility with <strong><code>sf</code></strong> &gt;= 0.9 (see issue <a href='https://github.com/ranghetti/sen2r/issues/295'>#295</a>)</li>
<li>Fix <a href='https://github.com/ranghetti/sen2r/issues/292'>#292</a></li>
<li>Small improvements</li>
</ul>
</div>
</div>
    <div id="version-1-3-2" class="section level1">
<h1 class="page-header" data-toc-text="1.3.2">
<a href="#version-1-3-2" class="anchor"></a>Version 1.3.2<small> 2020-02-27 </small>
</h1>
<div id="new-features" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features" class="anchor"></a>New features</h2>
<ul>
<li>Add argument <code>req_res</code> to <code><a href="../reference/safe_getMetadata.html">safe_isvalid()</a></code> and <code><a href="../reference/safe_getMetadata.html">rm_invalid_safe()</a></code>: now the presence of the JP2 images required by the processing chain is checked by default. L2A products without all the three resolutions will not be used.</li>
<li>Add output field <code>"res"</code> to the default <code><a href="../reference/safe_getMetadata.html">safe_getMetadata()</a></code> output, with the list of the available resolutions (“<code>all</code>” is returned in case of L1C products).</li>
</ul>
</div>
<div id="new-function-arguments" class="section level2">
<h2 class="hasAnchor">
<a href="#new-function-arguments" class="anchor"></a>New function arguments</h2>
<ul>
<li>Add argument <code>timeout</code> to <code><a href="../reference/sen2cor.html">sen2cor()</a></code> to limit the maximum Sen2cor execution time (after that time, Sen2Cor is stopped). This is useful to avoid blocking processing chains due to internal Sen2Cor errors.</li>
</ul>
</div>
<div id="dependencies" class="section level2">
<h2 class="hasAnchor">
<a href="#dependencies" class="anchor"></a>Dependencies</h2>
<ul>
<li>Add new suggested dependency <strong><code>sys</code></strong> (it is used to call Sen2Cor using <code><a href="https://rdrr.io/pkg/sys/man/exec.html">sys::exec_wait()</a></code> instead than <code><a href="https://rdrr.io/r/base/system.html">system()</a></code>, allowing exporting Sen2Cor output to log files).</li>
<li>Add new suggested dependency <strong><code>rgdal</code></strong> (since it is implicitly called by internal functions), as requested by CRAN policy.</li>
<li>Move <strong><code>units</code></strong> and <strong><code>tools</code></strong> to suggested dependencies.</li>
<li>Prepare to move <strong><code>shiny*</code></strong> and <strong><code>leaflet*</code></strong> dependencies to suggested (this will be done in a future release).</li>
</ul>
</div>
<div id="minor-changes-1" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-changes-1" class="anchor"></a>Minor changes</h2>
<ul>
<li>Allow choosing if ordering SAFE products from <code>dhus</code> or <code>apihub</code> (experimental).</li>
<li>Replace all <code>GET()</code> calls with <code>RETRY()</code>, so to avoid errors in case of temporary unavailability of services.</li>
<li>Allow Sen2Cor running with oldname SAFE (although the usage of these products is generally deprecated).</li>
<li>Bug fixes (<a href='https://github.com/ranghetti/sen2r/issues/272'>#272</a>, <a href='https://github.com/ranghetti/sen2r/issues/276'>#276</a>).</li>
</ul>
</div>
</div>
    <div id="version-1-3-1" class="section level1">
<h1 class="page-header" data-toc-text="1.3.1">
<a href="#version-1-3-1" class="anchor"></a>Version 1.3.1<small> 2020-02-07 </small>
</h1>
<div id="major-changes-1" class="section level2">
<h2 class="hasAnchor">
<a href="#major-changes-1" class="anchor"></a>Major changes</h2>
<ul>
<li>Documentation was improved with three new vignettes about GUI usage, command line usage and output structure.</li>
</ul>
</div>
<div id="bug-fixes-2" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes-2" class="anchor"></a>Bug fixes</h2>
<ul>
<li>Restore checking environmental variable in <code><a href="../reference/init_python.html">init_python()</a></code> (this urgent bug fixing was the reason of the urgent release of the current version).</li>
<li>Fix building offline footprint.</li>
<li>Fix the Dockerfile.</li>
</ul>
</div>
<div id="changes-in-default-argument-values" class="section level2">
<h2 class="hasAnchor">
<a href="#changes-in-default-argument-values" class="anchor"></a>Changes in default argument values</h2>
<ul>
<li>Accept both <code>sen2r(..., rm_safe = "yes"</code>) and <code>"all"</code>.</li>
<li>In the GUI, the maximum allowed cloud cover was set to 100% accordingly to the <code><a href="../reference/sen2r.html">sen2r()</a></code> defaults.</li>
</ul>
</div>
<div id="minor-changes-2" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-changes-2" class="anchor"></a>Minor changes</h2>
<ul>
<li>Add check on <code>max_mask</code> - <code>mask_type</code> coherence (if <code>max_mask &lt; 100</code> and <code>mask_type</code> is not specified, a warning is returned).</li>
<li>Suppress some useless warnings.</li>
<li>Switch examples on 2019 dates (previously examples were based on 2017 images, which were partially moved on LTA).</li>
<li>Do not print progress bars in logs.</li>
</ul>
</div>
</div>
    <div id="version-1-3-0" class="section level1">
<h1 class="page-header" data-toc-text="1.3.0">
<a href="#version-1-3-0" class="anchor"></a>Version 1.3.0<small> 2020-02-04 </small>
</h1>
<div id="major-changes-2" class="section level2">
<h2 class="hasAnchor">
<a href="#major-changes-2" class="anchor"></a>Major changes</h2>
<ul>
<li>Support for GDAL 3 / PROJ 6 was added:
<ul>
<li>Edit internal function to deal with CRS instead than PROJ.4 strings</li>
<li>Allow <code><a href="../reference/st_crs2.html">st_crs2()</a></code> accepting also WKT strings / EPSG codes in the form <code>"EPSG:xxxx"</code>
</li>
<li>Edit GUI to accept WKT / to warn if a PROJ.4 is passed</li>
</ul>
</li>
<li>After running <code><a href="../reference/sen2r.html">sen2r()</a></code> a short report is returned to output summarising the status of the required processing (see new internal function <code><a href="../reference/sen2r_process_report.html">sen2r_process_report()</a></code>). This should facilitate applying sen2r in a cycle until all “expected dates” are processed.</li>
<li>Management of Sen2Cor GIPP parameters: now the user can process L1C SAFE images applying a topographic correction (as done to produce L2A images on ESA Hub) or specifying other parameters managed by L2A_GIPP.xml file. To allow doing that, new arguments were added to <code><a href="../reference/sen2cor.html">sen2cor()</a></code> and <code><a href="../reference/sen2r.html">sen2r()</a></code> (see below) and a new option was added in the GUI.</li>
</ul>
</div>
<div id="new-functions-1" class="section level2">
<h2 class="hasAnchor">
<a href="#new-functions-1" class="anchor"></a>New functions</h2>
<ul>
<li>
<code><a href="../reference/gipp.html">read_gipp()</a></code> and <code><a href="../reference/gipp.html">set_gipp()</a></code> to read / create GIPP XML files with the parameters passed to Sen2Cor.</li>
<li>Internal function <code><a href="../reference/st_as_text_2.html">st_as_text_2()</a></code> which returns WKT or WKT2 depending on PROJ version</li>
<li>Internal function <code><a href="../reference/sen2r_process_report.html">sen2r_process_report()</a></code> to manage processing reports returned by <code><a href="../reference/sen2r.html">sen2r()</a></code>.</li>
</ul>
</div>
<div id="deprecated-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#deprecated-functions" class="anchor"></a>Deprecated functions</h2>
<ul>
<li>Internal function <code><a href="../reference/init_python.html">init_python()</a></code> was deprecated (Python is no longer managed by <strong><code>reticulate</code></strong>).</li>
</ul>
</div>
<div id="changes-in-default-argument-values-1" class="section level2">
<h2 class="hasAnchor">
<a href="#changes-in-default-argument-values-1" class="anchor"></a>Changes in default argument values</h2>
<ul>
<li>New argument <code>bigtiff</code> for BigTIFF management in functions <code><a href="../reference/s2_translate.html">s2_translate()</a></code>, <code><a href="../reference/s2_merge.html">s2_merge()</a></code>, <code><a href="../reference/s2_mask.html">s2_mask()</a></code>, <code><a href="../reference/s2_rgb.html">s2_rgb()</a></code> and <code><a href="../reference/s2_calcindices.html">s2_calcindices()</a></code>.</li>
<li>New arguments <code>use_dem</code> / <code>gipp</code> (function <code><a href="../reference/sen2cor.html">sen2cor()</a></code>) and <code>sen2cor_use_dem</code> / <code>sen2cor_gipp</code> (<code><a href="../reference/sen2r.html">sen2r()</a></code>) to manage GIPP parameters in Sen2Cor.</li>
<li>
<code>use_python</code> argument in <code><a href="../reference/sen2r.html">sen2r()</a></code> was deprecated (no longer needed).</li>
</ul>
</div>
<div id="minor-changes-3" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-changes-3" class="anchor"></a>Minor changes</h2>
<ul>
<li>All components of the order (available, ordered and notordered) are now saved in JSON files. This allows using them to re-do an order, specifying if re-ordering already ordered datasets or only order the ones identified as “notordered” (based on new argument “reorder”).</li>
<li>Output messages are formatted so not to exceed output line length.</li>
<li>Add support for BigTIFF format.</li>
<li>Dependencies <strong><code>reticulate</code></strong> and <strong><code>magrittr</code></strong> were removed.</li>
<li>Checks on the validity of SAFE products were improved.</li>
<li>Add NDBI / NDVIre indices (<a href='https://github.com/ranghetti/sen2r/issues/241'>#241</a>).</li>
<li>Add footprint among metadata retrieved using <code><a href="../reference/safe_getMetadata.html">safe_getMetadata()</a></code> (from existing offline SAFE archives) and <code><a href="../reference/s2_list.html">s2_list()</a></code> (from SciHub online metadata).</li>
<li>Filter offline SAFE archives by footprint instead than by S2 tile ID, so skipping using images which do not contain any data for a specific Area Of Interest.</li>
<li>Add method to convert class <code>safelist</code> to <code>sf</code> (using footprint).</li>
<li>Rewrite <code><a href="../reference/st_crs2.html">st_crs2()</a></code> using class methods (see the function help for newly accepted inputs).</li>
<li>
<code><a href="../reference/safe_getMetadata.html">safe_getMetadata()</a></code> now directly read XML SAFE files instead than calling GDAL through <strong><code>reticulate</code></strong> (this avoids errors in particular OS conditions).</li>
<li>Do not use PROJ4 string with PROJ &gt; 3 (<a href="https://rsbivand.github.io/ECS530_h19/ECS530_III.html" class="uri">https://rsbivand.github.io/ECS530_h19/ECS530_III.html</a>).</li>
<li>Retrieve the GDAL installation path using <code>gdal-config</code> instead than <code>whereis gdalinfo</code>.</li>
<li>Add a test for reprojection without EPSG.</li>
<li>Return a warning if SciHub is down.</li>
<li>Improve documentation about the problem occurring using newly created credentials.</li>
</ul>
</div>
<div id="fixes" class="section level2">
<h2 class="hasAnchor">
<a href="#fixes" class="anchor"></a>Fixes</h2>
<ul>
<li>Fix errors “DLL load failed” with Python GDAL scripts on Windows (see <a href='https://github.com/ranghetti/sen2r/issues/231'>#231</a> and <a href='https://github.com/ranghetti/sen2r/issues/234'>#234</a>) due to a missing <code>proj.db</code> file in <strong><code>rgdal</code></strong>.</li>
<li>Hide warning using PROJ &gt;= 6 (<a href="https://github.com/rspatial/raster/issues/78" class="uri">https://github.com/rspatial/raster/issues/78</a>).</li>
<li>Other various bug fixes (see issues).</li>
</ul>
</div>
</div>
    <div id="version-1-2-1" class="section level1">
<h1 class="page-header" data-toc-text="1.2.1">
<a href="#version-1-2-1" class="anchor"></a>Version 1.2.1<small> 2019-11-12 </small>
</h1>
<div id="major-changes-3" class="section level2">
<h2 class="hasAnchor">
<a href="#major-changes-3" class="anchor"></a>Major changes</h2>
<ul>
<li>New <code>safelist</code> class for lists of SAFE Sentinel-2 archives (see <a href="https://sen2r.ranghetti.info/reference/safelist-class.html">safelist-class</a>);</li>
<li>
<code><a href="../reference/sen2r.html">sen2r()</a></code> execution now causes saving the used parameters in a json file located in <code>~/.sen2r/proc_par</code> (this can be used to take trace of the executed processing chains);</li>
<li>
<code><a href="../reference/safe_getMetadata.html">safe_getMetadata()</a></code> function was rewritten: now files are scanned only if the user requires metadata which must be retrieved from file content, otherwise only file names are analysed. Inputs can be also <code>safelist</code> objects. The support for oldname SAFE products is deprecated.</li>
</ul>
</div>
<div id="new-functions-methods" class="section level2">
<h2 class="hasAnchor">
<a href="#new-functions-methods" class="anchor"></a>New functions / methods</h2>
<ul>
<li>
<code><a href="../reference/install_sen2cor.html">link_sen2cor()</a></code> can be used to link an existing Sen2Cor installation to sen2r;</li>
<li>
<code>as()</code> methods can be used to convert <code>safelist</code> from/to <code>character</code>, <code>data.frame</code> and <code>data.table</code> (as well as <code>as.character()',</code>as.data.frame()<code>and</code>as.data.table()` functions).</li>
</ul>
</div>
<div id="changes-in-default-values" class="section level2">
<h2 class="hasAnchor">
<a href="#changes-in-default-values" class="anchor"></a>Changes in default values</h2>
<ul>
<li>
<code><a href="../reference/safe_getMetadata.html">safe_getMetadata()</a></code>: new arguments <code>format</code>, <code>simplify</code> and <code>allow_oldnames</code> (see the function reference for details);</li>
<li>
<code><a href="../reference/s2_list.html">s2_list()</a></code>: argument <code>output_type</code> was deprecated (use <code>as.data.table</code> to obtain a data.table instead than the new default <code>safelist</code> object);</li>
<li>
<code><a href="../reference/safe_shortname.html">safe_shortname()</a></code>: arguments <code>tiles</code>, <code>force_tiles</code>, <code>set.seed</code> and <code>multiple_names</code> were deprecated, since they are not used with SAFE compact names (old names are no more supported);</li>
</ul>
</div>
<div id="minor-changes-4" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-changes-4" class="anchor"></a>Minor changes</h2>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/Sys.setenv.html">Sys.setenv()</a></code> effects now do not affect the R environment after exiting from sen2r() execution;</li>
<li>
<code><a href="../reference/safe_shortname.html">safe_shortname()</a></code> does no more support oldname SAFE products;</li>
<li>the Docker version of the package was modified to support last package changes;</li>
<li>the delay between SciHub registration of new credentials and the possibility to use them on API hub is now documented in the GUI;</li>
<li>return a warning in case some LTA orders cannot be processed because user quota exceeded.</li>
</ul>
</div>
</div>
    <div id="version-1-2-0" class="section level1">
<h1 class="page-header" data-toc-text="1.2.0">
<a href="#version-1-2-0" class="anchor"></a>Version 1.2.0<small> Unreleased </small>
</h1>
<p>Starting from this version sen2r supports ordering products from Long Term Archive (LTA) (see news at <a href="https://inthub.copernicus.eu/userguide/LongTermArchive" class="uri">https://inthub.copernicus.eu/userguide/LongTermArchive</a>). Now the user can automatically order SAFE products which are not available for direct download, and use them when made available. Some internal functions can be exploited to manually manage orders.</p>
<p>Here above the related changes:</p>
<div id="new-functions-2" class="section level2">
<h2 class="hasAnchor">
<a href="#new-functions-2" class="anchor"></a>New functions</h2>
<ul>
<li>
<code>safe_is_valid()</code> to check if an order was processed;</li>
<li>
<code><a href="../reference/s2_order.html">s2_order()</a></code> to order products from LTA.</li>
</ul>
</div>
<div id="new-arguments" class="section level2">
<h2 class="hasAnchor">
<a href="#new-arguments" class="anchor"></a>New arguments</h2>
<ul>
<li>
<code><a href="../reference/sen2r.html">sen2r()</a></code> and <code><a href="../reference/s2_download.html">s2_download()</a></code> have a new argument <code>order_lta</code> (default: TRUE) to order SAFE archives not available for direct download;</li>
<li>
<code><a href="../reference/s2_gui.html">s2_gui()</a></code> has a new checkbox to set the previous argument.</li>
</ul>
</div>
<div id="other-changes-not-related-with-lta" class="section level2">
<h2 class="hasAnchor">
<a href="#other-changes-not-related-with-lta" class="anchor"></a>Other changes (not related with LTA)</h2>
<ul>
<li>Function <code><a href="../reference/build_example_param_file.html">build_example_param_file()</a></code> does no more compute TOA and RGB432T (this to avoid downloading 2 SAFE archives).</li>
<li>Code coverage was expanded.</li>
</ul>
<p><br></p>
</div>
<div id="sen2r-cran-release" class="section level2">
<h2 class="hasAnchor">
<a href="#sen2r-cran-release" class="anchor"></a><strong>sen2r</strong> CRAN release</h2>
<hr>
<p><strong><code>sen2r</code></strong> was accepted on CRAN (2017-10-21, version 1.1.0). From now, it is possible to install <a href="https://CRAN.R-project.org/package=sen2r">the CRAN version</a> with the following command:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"sen2r"</span>)</pre></div>
<p>The development version – which may contain updated features – can still be installed with the following command:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu">install_packages_github</span>(<span class="st">"ranghetti/sen2r"</span>)</pre></div>
</div>
</div>
    <div id="version-1-1-0" class="section level1">
<h1 class="page-header" data-toc-text="1.1.0">
<a href="#version-1-1-0" class="anchor"></a>Version 1.1.0<small> 2019-10-21 </small>
</h1>
<div id="changes-in-default-values-1" class="section level2">
<h2 class="hasAnchor">
<a href="#changes-in-default-values-1" class="anchor"></a>Changes in default values</h2>
<ul>
<li>The default value for <code>"list_prods"</code> argument in <code><a href="../reference/sen2r.html">sen2r()</a></code> is NULL instead of <code>'BOA'</code>.</li>
<li>Remove <code>'no'</code> value for argument <code>"step_atmcorr"</code> in <code><a href="../reference/sen2r.html">sen2r()</a></code> (use <code>'l2a'</code> without selecting any L2A products instead).</li>
<li>Default values for <code>"smoothing"</code> and <code>"buffer"</code> arguments in <code><a href="../reference/s2_mask.html">s2_mask()</a></code> are now <code>0</code> (like in <code><a href="../reference/sen2r.html">sen2r()</a></code>) instead than 10/20 m.</li>
<li>Set <code>parallel = FALSE</code> as default in <code><a href="../reference/sen2r.html">sen2r()</a></code> (parallelisation must be explicitly required).</li>
<li>Since old name products were repackaged by ESA, these products are no longer supported.</li>
<li>In the case the users manually defines the path to be used as temporary directory and this directory already exists, a casual subdirectory of the user-defined folder is used (this to prevent to accidentally delete existing files).</li>
</ul>
</div>
<div id="major-changes-4" class="section level2">
<h2 class="hasAnchor">
<a href="#major-changes-4" class="anchor"></a>Major changes</h2>
<ul>
<li>
<strong><code>sen2r</code></strong> package directory is no more used to store files, but a subfolder <code>.sen2r</code> of the user Home directory is created and used. In this way, reinstalling sen2r will not require anymore to reinstall runtime dependencies / to reconfigure the package. The permission to write on this folder is asked to the user when the package is loaded for the first time.</li>
<li>
<code><a href="../reference/s2_list.html">s2_list()</a></code> and <code><a href="../reference/s2_download.html">s2_download()</a></code> now use internal methods instead of calling python function derived from s2download scripts by Hagolle (this substantially improve the speed of SAFE search), which were removed.</li>
<li>
<strong><code>sen2r</code></strong> is now supported also on MacOS.</li>
</ul>
</div>
<div id="newremoved-dependencies" class="section level2">
<h2 class="hasAnchor">
<a href="#newremoved-dependencies" class="anchor"></a>New/removed dependencies</h2>
<ul>
<li>Remove <strong><code>sp</code></strong> and <strong><code>rgdal</code></strong> from explicit dependencies.</li>
<li>Remove <strong><code>stringr</code></strong> and <strong><code>gdalUtils</code></strong> dependencies.</li>
<li>Add <strong><code>stars</code></strong> dependency.</li>
</ul>
</div>
<div id="new-functions-3" class="section level2">
<h2 class="hasAnchor">
<a href="#new-functions-3" class="anchor"></a>New functions</h2>
<ul>
<li>
<code><a href="../reference/str_pad2.html">str_pad2()</a></code>, equivalent to str_pad() without the needing to load <code>stringr</code>.</li>
<li>
<code><a href="../reference/raster_metadata.html">raster_metadata()</a></code>, to get raster metadata, without rgdal dependency.</li>
<li>
<code><a href="../reference/scihub_login.html">check_scihub_login()</a></code> to check if SciHub credentials are right.</li>
<li>
<code><a href="../reference/scihub_login.html">check_scihub_connection()</a></code> to check for internet connectivity.</li>
<li>
<code><a href="../reference/build_example_param_file.html">build_example_param_file()</a></code> (not exported) to build an example parameter file.</li>
</ul>
</div>
<div id="other-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#other-changes" class="anchor"></a>Other changes</h2>
<ul>
<li>Packages stability was improved by adding test functions, working with <strong><code>testthat</code></strong>.</li>
<li>S2 tiles are not provided as kmz within the package, but a rds file is downloaded after installing the package (in this way, package installation is lighter, and S2 tiles are read faster).</li>
<li>Function <code><a href="../reference/check_gdal.html">check_gdal()</a></code> was rewritten without using <strong><code>gdalUtils</code></strong>, in order to be simpler and faster.</li>
<li>Some new indices were added:
<ul>
<li>NDWI-NDWI2 (<a href='https://github.com/ranghetti/sen2r/issues/184'>#184</a>);</li>
<li>CRred-BDred-CRred2 (<a href='https://github.com/ranghetti/sen2r/issues/168'>#168</a>);</li>
<li>Indices from <a href="https://www.sentinel-hub.com/develop/documentation/eo_products/Sentinel2EOproducts">Sentinel-hub indices</a> were checked.</li>
</ul>
</li>
<li>The minimum convex hull of the extent is used instead of the bbox to search SAFE images.</li>
<li>Several “soft” error/warning messages were introduced.</li>
<li>ENVI headers now includes some information about band names (TOA/BOA) and SCL classes.</li>
<li>Coupling SAFE: in offline mode, if some L2A products exists but not the corresponding L1C, and TOA-derived products are required, only the “coupled” SAFE archives are used.</li>
<li>Small base example files were added to the package for testing purposes.</li>
<li>Sen2Cor version which the user wants to install can be chosen in the GUI.</li>
<li>Documentation was updated and improved, in particular adding function examples.</li>
<li>Unused old code was removed.</li>
<li>Several bugs were fixed.</li>
</ul>
</div>
</div>
    <div id="version-1-0-2" class="section level1">
<h1 class="page-header" data-toc-text="1.0.2">
<a href="#version-1-0-2" class="anchor"></a>Version 1.0.2<small> Unreleased </small>
</h1>
<div id="changes-in-default-argument-values-2" class="section level2">
<h2 class="hasAnchor">
<a href="#changes-in-default-argument-values-2" class="anchor"></a>Changes in default argument values</h2>
<ul>
<li>the default running order is now <code>"by groups"</code> instead than <code>"step by step"</code>: this ensures best computing speed and improves the management of disk usage, although it is not possible to see all the output messages in standard output (to see them, it is necessary to redirect them in a log file).</li>
<li>cloud masks: <code>"cloud_low_proba"</code> is not yet available in the GUI (if is still a valid argument value for compatibility), and <code>"cloud_and_shadow"</code> now includes class “unclassified”. This in order to include “unclassified” only in “conservative” mask values, and to exclude it in non-conservative ones.</li>
</ul>
</div>
<div id="edits-in-the-gui" class="section level2">
<h2 class="hasAnchor">
<a href="#edits-in-the-gui" class="anchor"></a>Edits in the GUI</h2>
<ul>
<li>add commands to manage parallelisation and running order (with documentation)</li>
<li>add button to export output messages in a log file</li>
<li>add MathML code for some custom spectral indices</li>
</ul>
</div>
<div id="new-dependencies" class="section level2">
<h2 class="hasAnchor">
<a href="#new-dependencies" class="anchor"></a>New dependencies</h2>
<ul>
<li>
<code>httr</code>: a change in Wget available version for Windows (1.20.3 instead than 1.19.4) caused the old link to break; moreover, downloading Wget using the new link was not possible with <code><a href="https://rdrr.io/r/utils/download.file.html">download.file()</a></code> due to a redirect. So, httr dependency was introduced, and download of Wget, aria2 and sen2cor is now performed with GET function.</li>
<li>
<code>dplyr</code>: the internal function <code><a href="../reference/tiles_intersects.html">tiles_intersects()</a></code> now perform dissolve operations over polygons of S2 tiles using <code>dplyr</code> commands (<code>group_by()</code> and <code>summarise()</code>).</li>
</ul>
</div>
<div id="minor-improvements" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-improvements" class="anchor"></a>Minor improvements</h2>
<ul>
<li>check the list of parameters whenever it is loaded</li>
</ul>
</div>
<div id="various-fixes" class="section level2">
<h2 class="hasAnchor">
<a href="#various-fixes" class="anchor"></a>Various fixes</h2>
<p>(see issues)</p>
</div>
</div>
    <div id="version-1-0-1" class="section level1">
<h1 class="page-header" data-toc-text="1.0.1">
<a href="#version-1-0-1" class="anchor"></a>Version 1.0.1<small> Unreleased </small>
</h1>
<div id="changes-from-version-1-0-0" class="section level2">
<h2 class="hasAnchor">
<a href="#changes-from-version-1-0-0" class="anchor"></a>Changes from version 1.0.0</h2>
<div id="major-changes-5" class="section level3">
<h3 class="hasAnchor">
<a href="#major-changes-5" class="anchor"></a>Major changes</h3>
<ul>
<li>A new algorithm was implemented in <code><a href="../reference/s2_calcindices.html">s2_calcindices()</a></code>: now internal raster routines are used by default instead than <code>gdal_calc.py</code>, allowing reducing RAM usage and computation time.</li>
<li>Better RAM usage and reduction of execution time: <code><a href="../reference/sen2r_getElements.html">sen2r_getElements()</a></code> was rewritten in order to: 1) avoid a RAM leak present in the function, which was causing a high RAM use in the first part of the execution of <code><a href="../reference/sen2r.html">sen2r()</a></code>; 2) considerably speed up the execution (now the metadata of 100 files is retrieved in 4 milliseconds instead than 80).</li>
</ul>
</div>
<div id="changes-in-function-defaults" class="section level3">
<h3 class="hasAnchor">
<a href="#changes-in-function-defaults" class="anchor"></a>Changes in function defaults</h3>
<ul>
<li>
<code><a href="../reference/s2_calcindices.html">s2_calcindices()</a></code> uses internal routines; the legacy mode can be used with the argument <code>proc_mode = "gdal_calc"</code> (default value is <code>"raster"</code>).</li>
<li>
<code><a href="../reference/list_indices.html">list_indices()</a></code> now returns only checked indices by default (specify <code>all = TRUE</code> to return also non-checked ones).</li>
<li>the default output format of <code><a href="../reference/sen2r_getElements.html">sen2r_getElements()</a></code> is now a data.table instead than a list (use <code>format = "list"</code> to reproduce the old default).</li>
</ul>
</div>
<div id="various-fixes-" class="section level3">
<h3 class="hasAnchor">
<a href="#various-fixes-" class="anchor"></a>Various fixes.</h3>
</div>
</div>
</div>
    <div id="version-1-0-0" class="section level1">
<h1 class="page-header" data-toc-text="1.0.0">
<a href="#version-1-0-0" class="anchor"></a>Version 1.0.0<small> Unreleased </small>
</h1>
<p>First stable release of package <strong>sen2r</strong>! See the announcement <a href="https://luigi.ranghetti.info/post/sen2r-released">here</a>.</p>
<div id="changes-from-version-0-3-4" class="section level2">
<h2 class="hasAnchor">
<a href="#changes-from-version-0-3-4" class="anchor"></a>Changes from version 0.3.4</h2>
<div id="gui-changes" class="section level3">
<h3 class="hasAnchor">
<a href="#gui-changes" class="anchor"></a>GUI changes:</h3>
<ul>
<li>Highlight selected tiles in the map (now red) in respect to unselected ones (grey)</li>
<li>Hide TCI product (replaced by RGB images)</li>
<li>Implement orbit selector and change the style of tile selector</li>
<li>Make boxes collapsible</li>
<li>Use shinyfiles to load extent (for coherence with other file selectors in the GUI)</li>
<li>Copying <code>path_out</code> to <code>path_rgb</code> / <code>path_indices</code> is not yet necessary (if empty, <code>path_out</code> is used)</li>
<li>Add loading spinner</li>
<li>Other style improvements</li>
</ul>
</div>
<div id="new-functions-4" class="section level3">
<h3 class="hasAnchor">
<a href="#new-functions-4" class="anchor"></a>New functions</h3>
<ul>
<li>
<code><a href="../reference/tiles_intersects.html">tiles_intersects()</a></code>: when an extent is loaded, now only required tiles are automatically used, instead than all the overlapping ones.</li>
</ul>
</div>
<div id="update-dependencies" class="section level3">
<h3 class="hasAnchor">
<a href="#update-dependencies" class="anchor"></a>Update dependencies</h3>
<ul>
<li>after <a href="https://www.r-bloggers.com/a-major-upgrade-of-the-v8-package/">V8 major update</a>, <a href="https://ranghetti.github.io/sen2r/articles/installation.html">Installation page</a> was edited to refer to <code>v8</code> instead than to <code>v8-3.14</code>
</li>
</ul>
</div>
<div id="bug-fixing" class="section level3">
<h3 class="hasAnchor">
<a href="#bug-fixing" class="anchor"></a>Bug fixing:</h3>
<ul>
<li>Fix bug in SciHub login</li>
<li>Fix maps (tiles were hidden)</li>
<li>Fix:missing dependency <strong><code>lwgeom</code></strong>
</li>
<li>Various fixes (<a href='https://github.com/ranghetti/sen2r/issues/140'>#140</a>, <a href='https://github.com/ranghetti/sen2r/issues/141'>#141</a>, <a href='https://github.com/ranghetti/sen2r/issues/142'>#142</a>, etc.)</li>
</ul>
</div>
</div>
</div>
    <div id="version-0-3-4" class="section level1">
<h1 class="page-header" data-toc-text="0.3.4">
<a href="#version-0-3-4" class="anchor"></a>Version 0.3.4<small> Unreleased </small>
</h1>
<div id="major-improvements" class="section level3">
<h3 class="hasAnchor">
<a href="#major-improvements" class="anchor"></a>Major improvements</h3>
<ul>
<li>Implement 4 different processing orders in order to fasterize processing. See “processing_order” in <code><a href="../reference/sen2r.html">sen2r()</a></code> documentation. The 4 different modes allow to privilege stability, velocity or disk space. In this version, the legacy mode (“by_step”) is maintained as the default.</li>
<li>Add new function <code><a href="../reference/s2_rgb.html">s2_rgb()</a></code> to produce RGB images, integrating it in <code><a href="../reference/sen2r.html">sen2r()</a></code> and in the GUI.</li>
<li>Add a dockerised version of sen2r: <a href="https://hub.docker.com/r/ranghetti/sen2r" class="uri">https://hub.docker.com/r/ranghetti/sen2r</a>
</li>
</ul>
</div>
<div id="changes" class="section level3">
<h3 class="hasAnchor">
<a href="#changes" class="anchor"></a>Changes</h3>
<ul>
<li>Change base cloud masks:
<ul>
<li>class “Saturated and defective” is masked within all masks;</li>
<li>class “Dark area pixels” is masked in masks in which “Cloud shadows” was masked;</li>
<li>mask “cloud_shadow_cirrus” was renamed to “clear_sky”;</li>
<li>a new “land” mask was added.</li>
</ul>
</li>
<li>Add “nomask” level to <code><a href="../reference/s2_mask.html">s2_mask()</a></code>
</li>
<li>Names of ratio indices now uses “:” instead of “/” (<a href='https://github.com/ranghetti/sen2r/issues/123'>#123</a>)</li>
<li>Index TCI_idx now is TCIdx</li>
<li>Use a default extent name (leaving it empty is now not allowed, in order not to confuse with naming convention of merged files)</li>
</ul>
</div>
<div id="other-improvements" class="section level3">
<h3 class="hasAnchor">
<a href="#other-improvements" class="anchor"></a>Other improvements</h3>
<ul>
<li>Improve SAFE filtering: removing duplicates; filtering by position (only the ones overlapping the extent); do not perform a double check of existing products in offline mode.</li>
<li>Improve GUI: improve cloud mask helper (documentation within <code><a href="../reference/s2_gui.html">s2_gui()</a></code> was improved by adding a modaldialog which explains how to apply buffer and smoothing to cloud masks)</li>
<li>Allow sen2r working with GDAL 2.1.2</li>
<li>Allow GDAL path to be specified in <code><a href="../reference/check_gdal.html">check_gdal()</a></code>
</li>
<li>Implements a faster method for masking</li>
<li>Add max_cloud_safe argument to <code><a href="../reference/sen2r.html">sen2r()</a></code>
</li>
<li>Add a function <code><a href="../reference/safe_getMetadata.html">safe_isvalid()</a></code> to check for valid SAFE archive names, and use it to filter existing SAFE folders (<a href='https://github.com/ranghetti/sen2r/issues/104'>#104</a>)</li>
<li>Update installation documentation (Linux dependencies and Docker)</li>
</ul>
</div>
<div id="fixes-1" class="section level3">
<h3 class="hasAnchor">
<a href="#fixes-1" class="anchor"></a>Fixes</h3>
<ul>
<li>
<strong>Important fix</strong>: fix indices computation (before that, indices with additive values were wrongly generated).</li>
<li>Avoid errors when a SAFE directory exists but not in the right format</li>
<li>Fix the fiddly error which caused several blocks when starting <code><a href="../reference/s2_merge.html">s2_merge()</a></code> or <code><a href="../reference/s2_calcindices.html">s2_calcindices()</a></code>
</li>
<li>Fix searching oldname products with “auto” corr_type</li>
<li>Fix loading a custom mask from json parameter file</li>
<li>remove duplicated EVI2 index</li>
<li><a href='https://github.com/ranghetti/sen2r/issues/112'>#112</a>, <a href='https://github.com/ranghetti/sen2r/issues/115'>#115</a>, <a href='https://github.com/ranghetti/sen2r/issues/120'>#120</a>, <a href='https://github.com/ranghetti/sen2r/issues/124'>#124</a>, and others</li>
</ul>
</div>
</div>
    <div id="version-0-3-3" class="section level1">
<h1 class="page-header" data-toc-text="0.3.3">
<a href="#version-0-3-3" class="anchor"></a>Version 0.3.3<small> Unreleased </small>
</h1>
<p>This is an improvement of version 0.3.2, with several fixes and improvements.</p>
<div id="major-changes-6" class="section level3">
<h3 class="hasAnchor">
<a href="#major-changes-6" class="anchor"></a>Major changes</h3>
<ul>
<li>Add internal logging (argument <code>log</code> of function <code><a href="../reference/sen2r.html">sen2r()</a></code>)</li>
<li>New function <code><a href="../reference/s2_dop.html">s2_dop()</a></code> to know the Dates Of Passage over orbits</li>
<li>Cloud mask can now be smoothed and buffered, both using <code><a href="../reference/sen2r.html">sen2r()</a></code> and the GUI</li>
<li>Add apihub parameter in sen2r() and in the GUI: It is now possible to specify a custom apihub.txt file for specific executions (i.e. for scheduled processes).</li>
</ul>
</div>
<div id="changes-1" class="section level3">
<h3 class="hasAnchor">
<a href="#changes-1" class="anchor"></a>Changes</h3>
<ul>
<li>Minor edits in GUI</li>
<li>Parallelise functions and manage errors</li>
<li>Create load_binpaths() (<a href='https://github.com/ranghetti/sen2r/issues/87'>#87</a>: Create a function to load paths of external executables and adapt other functions to use it.</li>
<li>Implement search for ingestion date</li>
<li>Split <code>names_missing</code> into <code>names_cloudcovered</code> and <code>names_missing</code>
</li>
<li>Add some burn indices and update spectral indices from IDB</li>
<li>Change some function names (<code>s2_getMetadata</code> -&gt; <code>safe_getMetadata</code>; <code>s2_shortname</code> -&gt; <code>safe_shortname</code>; <code>fs2nc_getElements</code> -&gt; <code>sen2r_getElements</code>)</li>
</ul>
</div>
<div id="fixes-2" class="section level3">
<h3 class="hasAnchor">
<a href="#fixes-2" class="anchor"></a>Fixes</h3>
<ul>
<li>Ignore baseline in computing required SAFE names</li>
<li>Fix <a href='https://github.com/ranghetti/sen2r/issues/82'>#82</a> (Now BOA and TOA uses GTiff intermediate files instead of VRT (gdal_calc failed using vrt as input, computing only the first band))</li>
<li>Uniform some default argument values</li>
<li>Various fixes</li>
</ul>
</div>
</div>
    <div id="version-0-3-2" class="section level1">
<h1 class="page-header" data-toc-text="0.3.2">
<a href="#version-0-3-2" class="anchor"></a>Version 0.3.2<small> Unreleased </small>
</h1>
<p>This is an improvement of version 0.3.1, with several fixes and improvements.</p>
<div id="new-functions-5" class="section level3">
<h3 class="hasAnchor">
<a href="#new-functions-5" class="anchor"></a>New functions</h3>
<ul>
<li><p><code><a href="../reference/check_sen2r_deps.html">check_sen2r_deps()</a></code>: a new GUI to help checking dependencies.</p></li>
<li><p>Add function <code><a href="../reference/s2_mask.html">s2_perc_masked()</a></code> to compute the percentage of cloud-masked surface.</p></li>
</ul>
</div>
<div id="gui-changes-1" class="section level3">
<h3 class="hasAnchor">
<a href="#gui-changes-1" class="anchor"></a>GUI changes</h3>
<ul>
<li><p>Major GUI improvements in the definition of the extent: now the main map is used only to show the extent and the tiles, while the definition of the extent (drawn, specified with a bounding box or taken from a loaded polygon) is done in separate maps (this allows to avoid many errors).</p></li>
<li><p>Add radiobutton for index datatype, to choose the datatype when an index is generated.</p></li>
<li><p>Add maximum cloud cover threshold.</p></li>
<li><p>Implement seasonal time period (<a href='https://github.com/ranghetti/sen2r/issues/74'>#74</a>).</p></li>
<li><p>Implement the download with aria2c.</p></li>
</ul>
</div>
<div id="processing-chain" class="section level3">
<h3 class="hasAnchor">
<a href="#processing-chain" class="anchor"></a>Processing chain</h3>
<ul>
<li><p>Major commit: retrieve also existing filenames. Before this commit, if some products were partially retrieved (e.g. output BOA) and some depending on them are missing (e.g. an index) but SAFE were not required, the corresponding expected vectors were not retrieved (missing SAFE tile names nothing was generated). Now, existing names matching the parameters are attached to each "_exp" vector.</p></li>
<li>Manage parallelisation:
<ul>
<li>add partial parallelisation in s2_calcindices() (on infiles, not on indices);</li>
<li>add “parallel” argument in sen2r() to allow singlecore mode;</li>
<li>fix parallel=FALSE in function (force n_cores=1). In general, now the whole processing chain can be optionally launched in single core.</li>
</ul>
</li>
</ul>
</div>
<div id="addition-to-existing-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#addition-to-existing-functions" class="anchor"></a>Addition to existing functions</h3>
<ul>
<li><p>Improvement in integer / byte data types for generation of indices: Int16 is now the default data type; choosing an integer data type the output values are clipped on the valid format range, and the scaling factor can be chosen by the user; choosing Byte, interval -1 to 1 is coerced to 0-200 (with nodata=255).</p></li>
<li><p>Use standard nodata values to compute indices.</p></li>
<li><p>Return the list of created files after processing.</p></li>
<li><p>Accept custom mask combinations: now it is possible to define masks with a custom combination of SCL classes to be masked.</p></li>
<li><p>Allow argument “timewindow” in <code><a href="../reference/sen2r.html">sen2r()</a></code> to be a single integer value, which is interpreted as the period between today and <em>n</em> days ago.</p></li>
<li><p>Uniform temporary directories (<a href='https://github.com/ranghetti/sen2r/issues/73'>#73</a>). Now the principal functions have the parameters tmpdir and rmtmp to set the temporary directory and the choice to delete /not to delete temporary files. Only two exceptions: create_indices_db() uses a fixed temporary directory (since it is a function intended not to be run by end users); sen2cor() launched from sen2r() uses a default temporary directory if <code>tmpdir</code> is in a SAMBA mountpoint over Windows.</p></li>
</ul>
</div>
<div id="other-changes-1" class="section level3">
<h3 class="hasAnchor">
<a href="#other-changes-1" class="anchor"></a>Other changes</h3>
<ul>
<li><p>Update to sen2cor 2.5.5, and manage S2A L2A operational products (<a href="https://scihub.copernicus.eu/news/News00305" class="uri">https://scihub.copernicus.eu/news/News00305</a>).</p></li>
<li><p>Add a welcome message and a logo.</p></li>
<li><p>Change package name from <strong>SALTO</strong> to <strong>sen2r</strong>, and rename the main function consequently to <code><a href="../reference/sen2r.html">sen2r()</a></code>.</p></li>
<li><p>Remove s2download as dependence (now it is integrated within the package).</p></li>
<li><p>Remove sprawl dependencies.</p></li>
</ul>
</div>
<div id="major-fixes" class="section level3">
<h3 class="hasAnchor">
<a href="#major-fixes" class="anchor"></a>Major fixes</h3>
<ul>
<li><p>Avoid blurs and artifices in thumbnails. stack2rgb() now works with GDAL routines; gdalwarp is used instead than gdal_translate for reducing the size of input images (to avoid averaging NA values, which produced blurs on borders of BOA thumbnails); intermediate GTiff files are used to bypass the presence of artifices in SCL PNG thumbnails and to produce JPEG multiband TOA/BOA thumbnails.</p></li>
<li><p>Load python modules correctly. Now on Windows all the modules are imported using import_from_path() in init_python(), which is called anywhere modules are needed.</p></li>
<li><p>Fix unrecognised osgeo in Windows. When running gdal_calc in Windows with multiple Python installations, the wrong one (i.e. Anaconda) is used, and “no module names osgeo” error is returned.</p></li>
<li><p>Other minor fixes.</p></li>
</ul>
</div>
</div>
    <div id="version-0-3-1" class="section level1">
<h1 class="page-header" data-toc-text="0.3.1">
<a href="#version-0-3-1" class="anchor"></a>Version 0.3.1<small> Unreleased </small>
</h1>
<p>This is an improvement of version 0.3.1, with several fixes and secondary improvements:</p>
<p>Changes:</p>
<ul>
<li>Allows output directories to be created by fidolasen_s2 (<a href='https://github.com/ranghetti/sen2r/issues/54'>#54</a>)</li>
<li>Convert NA arguments to NULL</li>
<li>Add check that the mask polygons are not empty</li>
<li>Add parameter extent_name (<a href='https://github.com/ranghetti/sen2r/issues/58'>#58</a>)</li>
<li>Add exception for Hub unavailable</li>
<li>Add support for multiple tiles and extent names</li>
<li>Allow to generate thumbnails also on maps with wrong naming convention …</li>
<li>Allow to generate thumbnails also on maps with wrong naming convention …</li>
<li>Add “tiles” argument to consider only specified tiles</li>
<li>Add the possibility to download products over Windows (<a href='https://github.com/ranghetti/sen2r/issues/49'>#49</a>)</li>
<li>Add extent_name in the GUI (<a href='https://github.com/ranghetti/sen2r/issues/58'>#58</a>)</li>
<li>Add automatic installation of Wget on Windows</li>
<li>Add support for TCI thumbnail</li>
</ul>
<p>Some fixes:</p>
<ul>
<li>Fix recognising gdalUtils after R restarts</li>
<li>Fix error applying sen2cor on oldname SAFE</li>
<li>Delete also L1C product when applying sen2cor on a copy of the SAFE</li>
<li>Fix to recognise all SAFE paths</li>
<li>Do not ask for overwriting dependences in non interactive mode</li>
<li>Fix the check on dstnodata length</li>
<li>Fix the number of polygons required to mask</li>
<li>Combine multiple features in mask / extent</li>
<li>Accept non-sf extents or sf with NAs within fields</li>
<li>Change TCI mask values (use 0 instead of NA in order not to create problems with 8-bit format)</li>
<li>Various fixes (see solved issues)</li>
</ul>
</div>
    <div id="version-0-3-0" class="section level1">
<h1 class="page-header" data-toc-text="0.3.0">
<a href="#version-0-3-0" class="anchor"></a>Version 0.3.0<small> Unreleased </small>
</h1>
<p>This version allows to perform all basic operations with Sentinel-2 data: finding and downloading the required tiles (on Linux), correcting them with sen2cor, processing them (merging adjacent tiles, clipping, reprojecting, rescaling, applying atmospheric mask) to create output multiband files (in a format managed by GDAL) and spectral indices.</p>
<p>The version follows the issued scheduled for <a href="https://github.com/ranghetti/sen2r/milestone/1">milestone 0.3.0</a>; future improvements with Sentinel-2 data are scheduled for <a href="https://github.com/ranghetti/sen2r/milestone/3">release 0.4.0</a>.</p>
</div>
    <div id="version-0-2-0" class="section level1">
<h1 class="page-header" data-toc-text="0.2.0">
<a href="#version-0-2-0" class="anchor"></a>Version 0.2.0<small> Unreleased </small>
</h1>
<p>This is an intermediate version, which does not allow yet to perform a complete workflow, but it allows to manually find (<code><a href="../reference/s2_list.html">s2_list()</a></code>), download (<code><a href="../reference/s2_download.html">s2_download()</a></code>), correct (<code>s2_sen2cor()</code>), translate in a format managed by GDAL (<code><a href="../reference/s2_translate.html">s2_translate()</a></code>) and merge by orbit number (<code><a href="../reference/s2_merge.html">s2_merge()</a></code>) Sentinel-2 data.</p>
<p>An example of possible manual workflow is shown in the temporary script <code>WIP/tutorial.R</code>. For a complete automatic workflow on Sentinel-2 data, wait <a href="https://github.com/ranghetti/sen2r/milestone/1">version 0.3.0</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>

</div>


      <footer>
      <div class="copyright">
  <p>Developed by Luigi Ranghetti, Lorenzo Busetto.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


