---
output:
  github_document:
    toc: yes
    toc_depth: 2
  fig_caption: no
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

[![Travis-CI Build Status](https://travis-ci.org/ggranga/fidolasen.svg?branch=master)](https://travis-ci.org/ggranga/fidolasen)
[![CRAN_Status_Badge](http://www.r-pkg.org/badges/version/fidolasen)](https://cran.r-project.org/package=fidolasen)
[![License: GPL v3](https://img.shields.io/badge/License-GPL%20v3-blue.svg)](http://www.gnu.org/licenses/gpl-3.0)

# fidolasen: FInd, DOwnload and preprocess LAndsat and SENtinel images

## Warning
This package is under construction: for now only the functions documented in the [function references](https://ggranga.github.io/fidolasen/reference/index.html) are working. 

Current version is pre-release 0.2.0 (see [release details](https://github.com/ggranga/fidolasen/releases/tag/0.2.0)).


## Installation

You can install fidolasen from GitHub with:

```{r gh-installation, eval = FALSE}
# install.packages("devtools")
devtools::install_github("ggranga/fidolasen")
```

This will install the R package, containing all the functions necessary to preprocess data. 
To download Sentinel-2 images and perform atmospheric correction with
[sen2cor](http://step.esa.int/main/third-party-plugins-2/sen2cor),
the package makes use of a set of Python functions ([s2download](https://github.com/ggranga/s2download)).
To import these scripts, run R function 
[`s2_download()`](https://ggranga.github.io/fidolasen/reference/install_s2download.html)
included in the package. 
Please notice that the use of sen2cor algorythm for now is possible only under Linux systems,
and the installation of the docker (necessary to run it) requires some time and a consistent 
amount of disk space.


## Usage

The simpler way to use the functions developed until now is to follow the following two steps: 

1. `eval=FALSE param <- s2_gui()`, 
    which opens the GUI with which the user can set all the necessary parameters;
2. `fidolasen_s2(param)`, to launch the main function with the
    selected parameters.
    
Other possibilities are:

* to launch [`fidolasen_s2()`](https://ggranga.github.io/fidolasen/reference/s2_gui.html)
    with parameters passed manually (see the documentation of the function for further details);
* to use other specific functions to run single steps separately:
    + [`s2_list()`](https://ggranga.github.io/fidolasen/reference/s2_list.html)
        to retrieve the list of available Sentinel-2 products basing on input parameters;
    + [`s2_download()`](https://ggranga.github.io/fidolasen/reference/s2_download.html)
        to download Sentinel-2 products;
    + [`s2_sen2cor()`](https://ggranga.github.io/fidolasen/reference/s2_sen2cor.html)
        to correct level-1C products using [sen2cor](http://step.esa.int/main/third-party-plugins-2/sen2cor);
    + [`s2_translate()`](https://ggranga.github.io/fidolasen/reference/s2_translate.html)
        to convert Sentinel-2 products from SAFE format to a format managed by GDAL;
    + [`s2_merge()`](https://ggranga.github.io/fidolasen/reference/s2_merge.html)
        to merge Sentinel-2 tiles which have the same date and orbit;
    + [`gdal_warp()`](https://ggranga.github.io/fidolasen/reference/gdal_warp.html)
        to clip, reproject and warp raster files (this is a wrapper to call
        [gdal_translate](http://www.gdal.org/gdal_translate.html) or 
        [gdalwarp](http://www.gdal.org/gdalwarp.html) basing on input parameters);
    + [`s2_mask()`](https://ggranga.github.io/fidolasen/reference/s2_mask.html)
        to apply a cloud mask to Sentinel-2 products;
    + [`s2_calcindices()`](https://ggranga.github.io/fidolasen/reference/s2_calcindices.html)
        to compute maps of spectral indices from Sentinel-2 Surface Reflectance multiband raster files.


## Credits

`fidolasen` is being developed by Luigi Ranghetti and Lorenzo Busetto
([IREA-CNR](http://www.irea.cnr.it)),
and it is released under [GPL 3.0](https://www.gnu.org/licenses/gpl.html).


